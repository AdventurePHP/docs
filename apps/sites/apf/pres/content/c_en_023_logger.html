<doku:title parent="119" tags="documentation,class reference,classes,reference,logger" title="Logger" urlname="Logger">
  The class Logger is a tool to accomplish logging issues. For configuration issues, the registry
  directive LogDir must be changed as desired.
</doku:title>
<p>
   The class <em>Logger</em> is a tool to accomplish logging issues. To not influence the
   performance of an web application in a negavive way the logger must be used in singleton flavour. The
   component ensures that every log entry is flushed into a logfile at the end of a request. The
   <em>Logger</em> uses the registry value <em>LogDir</em> from the registry namespace
   <em>apf::core</em> as a it's log directory. The value of the registry entry is initialized
   with the <em>absulute</em> path to the current directory plus the subfolder <em>logs</em>
   by default. In order to adjust the log directory to meet your needs, the desired path must be commited
   to the registry before instanciating the page or frontcontroller. This can be achieved by using the
   following code snippet:
</p>
<gen:highlight type="php">
Registry::register('apf::core','LogDir','/path/to/my/log/dir');
</gen:highlight>
<p>
   The path defined there characterizes the central logging path for all logfiles within one application.
</p>
<div class="hint">
   To avoid log dir access errors, please define <em>absolut</em> log paths only!
</div>
<p>
   To use the logger it must be imported using
</p>
<gen:highlight type="php">
import('core::logging','Logger');
</gen:highlight>
<p>
   prior to use. After that the logger can be created by using the abstract singleton class:
</p>
<gen:highlight type="php">
$log = &Singleton::getInstance('Logger');
</gen:highlight>
<p>
   <em>$log</em> now contains a reference on the logger in the current scope of application. To add a
   log message with the content <em>MESSAGE</em> to the log file <em>FILENAME</em> the
   code snippet
</p>
<gen:highlight type="php">
$log->logEntry('FILENAME','MESSAGE');
</gen:highlight>
<p>
   can be used. The third parameter of the method <em>logEntry()</em> (optional) specifies
   the <em>SEVERITY</em> of the message provided. This parameter can be filled with any string.
   Merely <em>ERROR</em> is used for error messages, default value is <em>INFO</em>.
</p>
<div class="hint">
   In case the application does excessive logging it may be good to save memory to flush the log
   buffer more than one time within the request. For this reason, sinve 1.14 the <em>Logger</em> 
   includes a threshold that causes the log buffer to auto-flush when the number of entries
   reaches this number. Using <em>setMaxBufferLength()</em> you can configure the value that has
   initially been set within the class. After flushing, the log buffer is empty again.
</div>

<core:importdesign namespace="modules::comments::pres::templates" template="comment" categorykey="en_023" />