<doku:title parent="119" tags="bbcodeparser" title="bbCodeParser" urlname="bbCodeParser">
  The <strong>bbCodeParser</strong> component can be used to format variable text. Typically the
  text to format contains control characters like [b], [i] or [u]. The class offers an easy and
  standardised interface to format bbCode text with HTML code.
</doku:title>
<div class="warn">
   <strong>bbCodeParser</strong> was removed from the release of the Adventure PHP Framework
   (APF) within release 1.9. Please use the <int:link pageid="077">AdvancedBBCodeParser</int:link>
   class instead!
</div>
The <strong>bbCodeParser</strong> component can be used to format text that contains bbCode compatible
control characters like
<ul>
  <li>[b]..[/b]</li>
  <li>[i]..[/i]</li>
  <li>[u]..[/u]</li>
</ul>
to mark a string to be displayed bold, italic or underlined. The class offers an easy and
standardised interface to format bbCode text with HTML code. The integration of the component can be
achieved by
<gen:highlight type="php">
import('tools::string','bbCodeParser');
</gen:highlight>
<strong>Note:</strong> The formating code used here is similar to the <strong>BBCode</strong>
formatting code but is not congruent altogether. Please refer to the
<int:link pageid="002" /> to get a general idea
of the formating features.
<br />
<br />
To use the <strong>bbCodeParser</strong> contained in the framework, it must be configured first.
For this reason the configuration file
<gen:highlight type="code">
/config/tools/string/{CONTEXT}/{ENVIRONMENT}_fonttags.ini
</gen:highlight>
must be present. This files defines the sections font size and color. Typically the content of the
configuration file is as follows:
<gen:highlight type="ini">
[FontSize]
1 = "10px"
2 = "12px"
3 = "16px"
4 = "18px"
5 = "24px"
6 = "32px"

[Color]
green = "#56a437"
blue = "#002488"
light-blue  = "rgb(102 153 255)"
orange = "rgb(233 142 31)"
grey = "#666666"
red = "red"
violette = "yellow"
</gen:highlight>
Hence the author of a bbCode formated text can influence font size by using the
<gen:highlight type="apf-xml">
[3]...[/3]
</gen:highlight>
tags as well as define the font color by using
<gen:highlight type="apf-xml">
[orange]...[/orange]
</gen:highlight>
The number of definitions within these sections is not limited and can be extended individually.
<br />
<br />
<br />
Moreover the <strong>bbCodeParser</strong> offers an extension point to latch additional formaters.
For this reason the configuration file
<gen:highlight type="code">
/config/tools/string/{CONTEXT}/{ENVIRONMENT}_bbcpext.ini
</gen:highlight>
must be created. This file defines the additional formaters that will be invoked after calling the
standard formatting methods. A single config section looks as follows:
<gen:highlight type="ini">
[News]
Namespace = "sites::demosite::biz::bbcpext"
Module = "HeadlineFormatter"
Class = "HeadlineTagParser"
Method = "parseTags"
</gen:highlight>
Each section defines the namespace where the formatter is stored, the file and class name and the
name of the method that is used to format a certain string. The thus defined method is given a string
to format internally and give back after processing it. The configuration file can contain any amount
of formatters.
<br />
<br />
The formatter described in the config section example can be implemented as follows (condensed ):
<gen:highlight type="php">
class HeadlineTagParser {

   public function parseTags($Text){
      $headlines = array('[U1]' => '<span style="font-size: 20px; font-weight: bold;">',
                         '[u1]' => '<span style="font-size: 20px; font-weight: bold;">',
                         '[/U1]' => '</span>',
                         '[/u1]' => '</span>'
                      );
      return strtr($text,$headlines);
   }

}
</gen:highlight>