<doku:title parent="119" tags="bbcodeparser" title="bbCodeParser" urlname="bbCodeParser">
  Der bbCodeParser kann zur Formatierung von beliebigen Texten eingesetzt werden. Typischerweise
  beinhaltet bbCode-formatierter Text Steuerzeichen wie [b], [i] oder [u]. Die Komponente bietet
  jedoch einen Extension-Point, über den weitere Formatierer eingesetzt werden können.
</doku:title>
<div class="warn">
   Die Klasse <strong>bbCodeParser</strong> wurde in der Version 1.9 aus dem Release des
   Adventure PHP Framework (APF) entfernt. Bitte nutzen Sie statt dessen die Klasse
   <int:link pageid="077">AdvancedBBCodeParser</int:link>!
</div>
Der <strong>bbCodeParser</strong> kann zur Formatierung von beliebigen Texten eingesetzt werden.
Typischerweise beinhaltet bbCode-formatierter Text Steuerzeichen wie
<ul>
  <li>[b]..[/b]</li>
  <li>[i]..[/i]</li>
  <li>[u]..[/u]</li>
</ul>
um fett, kursiv und unterstrichene Textpassagen zu kennzeichnen. Die Klasse bietet eine einfache und
standardisierte Schnittstelle um diesen bbCode-ähnlich gestalteten Text mit HTML-Code
formatiert ausgeben zu können. Die Einbindung der Komponente kann per
<gen:highlight type="php">
  import('tools::string','bbCodeParser');
</gen:highlight>
erfolgen.
<br />
<br />
<strong>Hinweis:</strong> Der hier verwendete Formatierungscode ist an den als <strong>BBCode</strong>
bekannten Formatierungscode angelehnt und benutzt an manchen Stellen andere Formatierungszeichen.
Details können der <int:link pageid="002" /> entnommen werden.
<br />
<br />
Um den im Framework enthaltenen <strong>bbCodeParser</strong> verwenden zu können, muss dieser
zunächst konfiguriert werden. Zu diesem Zweck muss eine Konfigurationsdatei unter dem Pfad
<gen:highlight type="code">
/config/tools/string/{CONTEXT}/{ENVIRONMENT}_fonttags.ini
</gen:highlight>
vorhanden sein. Diese Datei definiert die Bereiche Schriftgrößen und Farben. Ein typischer
Inhalt ist:
<gen:highlight type="ini">
[FontSize]
1 = "10px"
2 = "12px"
3 = "16px"
4 = "18px"
5 = "24px"
6 = "32px"

[Color]
gruen = "#56a437"
blau = "#002488"
hellblau  = "rgb(102 153 255)"
orange = "rgb(233 142 31)"
grau = "#666666"
rot = "red"
lila = "yellow"
</gen:highlight>
Damit ist es möglich Schriftgrößen per
<gen:highlight type="apf-xml">
[3]...[/3]
</gen:highlight>
und Schriftfarben mit
<gen:highlight type="apf-xml">
[orange]...[/orange]
</gen:highlight>
zu beeinflussen. Die Anzahl der Einträge pro Sektion ist nicht begrenzt und kann beliebig
angepasst werden.
<br />
<br />
<br />
Der <strong>bbCodeParser</strong> bietet zudem eine Erweiterungsschnittstelle (extension point), um
weitere Formatierer einfach einhängen zu können. Zu diesem Zweck muss die Konfigurationsdatei
<gen:highlight type="code">
/config/tools/string/{CONTEXT}/{ENVIRONMENT}_bbcpext.ini
</gen:highlight>
angelegt werden. Diese definiert die zusätzlichen Formatter, die nach dem Formatieren der
Standard-Tags aufgerufen werden. Eine typische Konfigurationsdatei hat folgende Gestalt:
<gen:highlight type="ini">
[News]
Namespace = "sites::demosite::biz::bbcpext"
Module = "HeadlineFormatter"
Class = "HeadlineTagParser"
Method = "parseTags"
</gen:highlight>
Jede Sektion beschreibt den Namespace, in dem der Formatter liegt, dessen Datei- und Klassennamen und
den Namen der Methode, die zur Formatierung verwendet wird. Der dort definierten Methode wird ein
zu formatierender Text übergeben und muss den fertig formatierten Text zurückliefern. Die
Extension-Konfigurationsdatei kann beliebig viele Formatter definieren.
<br />
<br />
Der im Beispiel gezeigte Formatter wird wie folgt implementiert (gekürzt):
<gen:highlight type="php">
class HeadlineTagParser {

   public function parseTags($text){
      $headlines = array('[U1]' => '<span style="font-size: 20px; font-weight: bold;">',
                         '[u1]' => '<span style="font-size: 20px; font-weight: bold;">',
                         '[/U1]' => '</span>',
                         '[/u1]' => '</span>'
                      );
      return strtr($text,$headlines);
   }

}
</gen:highlight>