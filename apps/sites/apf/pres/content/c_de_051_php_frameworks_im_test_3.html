<doku:title parent="100" tags="php,frameworks,test,cakephp,codeigniter,zend framework,adventure php framework,bewertung" title="PHP-Frameworks im Test (3)" urlname="PHP-Frameworks-im-Test-3">
  Der Artikel PHP-Frameworks im Test vergleicht unterschiedliche Frameworks. Basis der Bewertung ist
  ein Anforderungskatalog, der darauf Wert legt, dass der Entwickler einen möglichst
  vollständigen Werkzeugkasten an die Hand bekommt um effektiv Webseiten und Web-Applikationen
  entwickeln zu können.
</doku:title>
<h3 id="Chapter-3-Details"><a href="#Chapter-3-Details">3. Details</a></h3>
Im vorliegenden Kapitel soll nun jeder Kandidat auf Herz und Nieren getestet werden. Dazu wird jedem
Framework ein eigenes Kapitel gewidmet in dem die unter Kapitel 1 beschriebenen Bewertungen
überprüft werden. Kapitel 3 soll jedoch, wie erwähnt, auch als Nachschlage-Werk
für Lösungen und Code-Beispiele genutzt werden können. Im Anschluss an jede Seite
finden Sie die Möglichkeit, die Inhalte zu kommentieren. Die Quellcodes, die während der
Evaluierung entstanden sind, können unter den in Kapitel 5 aufgeführten Links
heruntergeladen werden.
<br />
<br />
<br />
<h4 id="Chapter-3-1-CakePHP"><a href="#Chapter-3-1-CakePHP">3.1. CakePHP</a></h4>
<br />
<h5 id="Chapter-3-1-1-Allgemeines"><a href="#Chapter-3-1-1-Allgemeines">3.1.1. Allgemeines</a></h5>
<br />
<h6 id="Chapter-Roadmap-des-Projekts"><a href="#Chapter-Roadmap-des-Projekts">Roadmap des Projekts</a></h6>
Unter <doku:link>https://trac.cakephp.org/roadmap</doku:link> kann die Roadmap des Projektes bis
Milestone 2.0.0.x eingesehen werden. Darüber hinaus ist im Trac eine Timeline mit den aktuelle
eingepflegten Änderungen / Bugfixes und Features einzusehen. Der Besucher / Entwickler
erhält somit einen umfassenden Eindruck über die Aktivitäten und kann das Trac
zusätzlich als Knowledge-Database bei Problemen zu Rate ziehen.
<br />
<br />
<br />
<h6 id="Chapter-Aktualitaet-der-Version"><a href="#Chapter-Aktualitaet-der-Version">Aktualität der Version</a></h6>
Die unter <doku:link>http://cakeforge.org/frs/?group_id=23&release_id=294</doku:link>
verfügbare Version stammt vom 09.07.2007 03:10. Das Release-Datum und die vorhergehenden
Ausführungen stellen sicher, dass der Code aktuell ist und das Projekt regelmäßig
gepflegt wird.
<br />
<br />
<br />
<h6 id="Chapter-Release-Packages-in-verschiedenen-Formaten"><a href="#Chapter-Release-Packages-in-verschiedenen-Formaten">Release-Packages in verschiedenen Formaten</a></h6>
Die angebotenen Release-Packages sind in den Paket-Versionen ZIP, GZ und BZ2 verfügbar. Somit ist
sichergestellt, dass die Pakete auch auf Nicht-Windows-Betriebssystemen einfach verwendet werden
können.
<br />
<br />
<br />
<h6 id="Chapter-CVS-SVN-Repositories"><a href="#Chapter-CVS-SVN-Repositories">CVS/SVN-Repositories</a></h6>
Für CakePHP ist ein öffentliches SVN-Repository zugänglich, über das z.B.
"nightly builds" bezogen werden können. Unter <doku:link>https://trac.cakephp.org/wiki</doku:link>
sind die dafür nötigen SVN-Kommandos aufgeführt. Hiermit ist es dem Entwickler
möglich schnell und einfach Bugfixes zu beziehen.
<br />
<br />
<br />
<h6 id="Chapter-Bug-Tracking-Ticketing"><a href="#Chapter-Bug-Tracking-Ticketing">Bug-Tracking / Ticketing</a></h6>
Unter <doku:link>https://trac.cakephp.org/wiki/bugreport</doku:link> können Bugs über Trac
berichtet werden. Diese werden direkt in die Ticket-Queue übertragen, um sicher zu stellen, dass
die gemeldeten Bugs schnell gefixt werden.
<br />
<br />
<br />
<h6 id="Chapter-Version-fuer-PHP-4"><a href="#Chapter-Version-fuer-PHP-4">Version für PHP 4</a></h6>
Die installierte Version ist zu PHP 4 (im Test: Version 4.4.6) kompatibel.
<br />
<br />
<br />
<h6 id="Chapter-Version-fuer-PHP-5"><a href="#Chapter-Version-fuer-PHP-5">Version für PHP 5</a></h6>
Die installierte Version ist zu PHP 5 (im Test: Version 5.2.1) kompatibel.
<br />
<br />
<br />
<h5 id="Chapter-3-1-2-Installation"><a href="#Chapter-3-1-2-Installation">3.1.2. Installation</a></h5>
<br />
<h6 id="Chapter-Extract-Go"><a href="#Chapter-Extract-Go">Extract & Go</a></h6>
Die Installation gestaltet sich bei CakePHP sehr einfach. Das heruntergeladene Archiv muss lediglich
in den Bereich des Document-Roots des Webservers entpackt werden. Nach dem Extrahieren kann
die mitgelieferte Beispielseite per Browser aufgerufen werden. Im Test wurde für CakePHP eine
eigene VHOST-Konfiguration angelegt um eigene Log- und Error-Dateien zu haben, was für die
Funktion jedoch nicht relevant ist.
<br />
<br />
<br />
<h6 id="Chapter-Konfiguration"><a href="#Chapter-Konfiguration">Konfiguration</a></h6>
Es ist zunächst keine nachträgliche Konfiguration des Packages notwenig, es ist ohne diese
lauffähig.
<br />
<br />
<br />
<h5 id="Chapter-3-1-3-Erste-Schritte"><a href="#Chapter-3-1-3-Erste-Schritte">3.1.3. Erste Schritte</a></h5>
<br />
<h6 id="Chapter-Demo-Software"><a href="#Chapter-Demo-Software">Demo-Software</a></h6>
Im Lieferumfang des CakePHP-Frameworks ist eine Demo-Seite enthalten, die die Konfiguration prüft,
auf wichtige Stellen im Manual hinweist, Möglichkeiten der Gestaltung der aktuell aufgerufenen
Seite aufzeigt und Internet-Ressourcen zu CakePHP auflistet.<br />
Die Demo-Seite enthält Hinweise auf die zu ändernden Dateien und macht es dem Benutzer somit
sehr leicht erste Änderungen einzupflegen und sich mit der Software zurecht zu finden. Die Seite
beinhaltet jedoch keine Demo-Module, die ein Gefühl für die Funktionsweise der Software geben.
<br />
<br />
<br />
<h6 id="Chapter-Einfuehrung-Quickstart"><a href="#Chapter-Einfuehrung-Quickstart">Einführung / Quickstart</a></h6>
Unter <doku:link>http://manual.cakephp.org/chapter/intro</doku:link> findet der Einsteiger eine
Übersicht über die Features des CakePHP-Frameworks. Die Ausführungen auf
<doku:link>http://manual.cakephp.org/chapter/basic_concepts</doku:link> führen den Entwickler
in die Struktur der Code-Dateien und deren Bedeutung ein. Eine erweiterte Anleitung zur
Installation, insbesondere zur Einrichtung des "mod_rewrite"-Moduls des Apache Webservers, kann unter
<doku:link>http://manual.cakephp.org/chapter/installing</doku:link> nachgeschlagen werden.
<br />
<br />
<br />
<h5 id="Chapter-3-1-4-Erstellung-einer-Webseite"><a href="#Chapter-3-1-4-Erstellung-einer-Webseite">3.1.4. Erstellung einer Webseite</a></h5>
<br />
<h6 id="Chapter-Template-Bau-Layoutgestaltung"><a href="#Chapter-Template-Bau-Layoutgestaltung">Template-Bau / Layoutgestaltung</a></h6>
Wie bereits erwähnt wartet das Framework mit sehr aussagekräftigen Benutzer-Meldungen auf,
die zur schnellen Einarbeitung und zum guten Verständnis von Fehler beitragen.
Es kostet relativ wenig Mühe ein eigenes Layout auf die Standard-Seite zu legen. Hierzu muss
lediglich die Datei <strong>/app/views/layouts/default.thtml</strong> angelegt und mit einem
<gen:highlight type="php">
 echo $content_for_layout;
</gen:highlight>
an der Stelle gefüllt werden, die für die Ausgabe des Inhaltes bestimmt ist. Interessant
wird nun der Nachbau der in den Anforderungen beschrieben Seite.
<br />
<br />
Zunächst wird - um Arbeit zu sparen - das Haupt-Layout der Seite in die Datei <strong>default.thtml</strong>
kopiert und die Startseite aufgerufen. PHP meldet daraufhin einen Fehler bei der Verarbeitung des
Strings
<gen:highlight type="apf-xml">
  &lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;
</gen:highlight>
Wie sich herausstellt, werden die CakePHP-Templates als PHP-Code ausgeführt und die PHP-
Konfiguration enthielt ein
<gen:highlight type="apf-xml">
  short_open_tag = On
</gen:highlight>
Setzt man diese Direktive in der php.ini auf "Off", wird das Template sauber verarbeitet. Allerdings
ist es somit natürlich nicht mehr möglich, innerhalb des Templates mit ShortTags zu arbeiten.
Bevorzugt man für das Einfügen von PHPCode die Möglichkeit, dies weiterhin mit
<gen:highlight type="apf-xml">
  &lt;?=$variable?&gt;
</gen:highlight>
zu lösen, müssen ShortTags wieder aktiviert und das XML-Tag als
<gen:highlight type="apf-xml">
  &lt;?='&lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;'."\n"?&gt;
</gen:highlight>
im Template angepasst werden. Diese Tatsache gilt ebenso für die Probanden <em>CodeIgniter</em>
und <em>Zend Framework</em>.
<br />
<br />
Der mit dem Package ausgelieferte Beispiel-Controller (<strong>PagesController</strong> unter
<strong>/cake/libs/controller</strong>) bietet die Möglichkeit Inhalts-Dateien, die unter
<strong>/apps/views/pages</strong> abgelegt sind per URL-Parameter auszugeben. Legt der Entwickler
eine Datei mit dem Namen <strong>startseite.thtml</strong> an, so kann diese per
<strong>http://caketest.de/pages/startseite</strong> aufgerufen werden und ist im oben erstellten
Layout eingebettet (<em>http://caketest.de</em> ist die lokale URL des VHOSTs, der für den Test
konfiguriert wurde). Um diese Funktion sicherstellen zu können muss allerdings der
<em>PagesController</em> um jeweils eine der Seite gleichnamige Action-Methode ergänzt werden.
Diese trägt gemäß Konvention den Namen <strong>{DateiNameOhneEndung}</strong>.
Bei "Startseite" ist das dann <strong>Startseite()</strong>.
<br />
<br />
Da das URL-Layout des Frameworks standardmäßig die Form
<gen:highlight type="apf-xml">
  http://my.domain.tld/{Controller}/{Action}[/{Value1}/{Value2}/...]
</gen:highlight>
erwartet, muss, um dasselbe URL-Layout wie in der vorliegenden Webseite generieren zu können,
ein neuer Controller mit dem Namen <strong>SeiteController</strong> angelegt werden. Diese kann
im einfachsten Fall von <em>PagesController</em> erben, oder selbst implementiert werden. Der
Einfachheit wegen sei hier nur die Variante 1 gezeigt:
<gen:highlight type="php">
require_once('../../cake/libs/controller/pages_controller.php');

class SeiteController extends PagesController {

   /**
   *  Name des Ordners in dem die View-Templates abgelegt werden.
   */
   private $name = 'demosite';

   /**
   *  Bekanntmachen der Helper
   */
   private $helpers = array(
                        'HTML',
                        'RepeaterWidget',
                        'HighlightWidget',
                        'PHPHighlightWidget',
                        'DokuNavigation',
                        'FileHighlight'
                       );


   /**
   *  null = keine Models werden verwendet
   */
   private $uses = null;

}
</gen:highlight>
Im Beispiel sind bereits später vorgenommene Änderungen enthalten. Zu einen wurde der
Ablage-Ort für die Template Dateien durch Setzen des Attributes <strong>$name</strong> in den
Ordner <em>/apps/views/demosite</em> verschoben, zum anderen werden hier bereits ViewHelper geladen,
die zur Ausgabeformatierung benötigt werden. Da hier lediglich Inhalt von Seiten ausgegeben
wird, teilt der Entwickler mit
<gen:highlight type="php">
private $uses = null;
</gen:highlight>
mit, dass dieser Controller kein Model benötigt.
<br />
<br />
<br />
<h6 id="Chapter-Handling-von-Controllern"><a href="#Chapter-Handling-von-Controllern">Handling von Controllern</a></h6>
Der nächste notwenige Schritt ist die Anpassung der URL-Routings. Dies kann in der Datei
<em>/apps/config/routes.php</em> erledigt werden. Dazu wurden drei weitere Einträge
hinzugefügt, die bewirken, dass bei Aufruf der URLs
<gen:highlight type="apf-xml">
   http://caketest.de
   http://caketest.de/Seite
   http://caketest.de/Seite/Startseite
</gen:highlight>
der jeweils korrekte Controller und die gewünschte ActionMenthode aufgerufen wird und die Ausgabe
generiert. Diese sind:
<gen:highlight type="php">
   $Route->connect('/', array('controller' => 'Seite', 'action' => 'display'));
   $Route->connect('/Seite', array('controller' => 'Seite', 'action' => 'display'));
   $Route->connect('/Seite/*', array('controller' => 'Seite', 'action' => 'display'));
</gen:highlight>
Anschließend werden beispielhaft einige Content-Dateien der Vorlage-Seite nach dem oben
beschriebenen Muster im Ordner <em>/apps/views/demosite</em> angelegt. Ausgewählt wurden hier
u.a.
<ul>
  <li><doku:link>http://adventure-php-framework.org/Seite/Startseite</doku:link></li>
  <li><doku:link>http://adventure-php-framework.org/Seite/Benchmark</doku:link></li>
  <li><doku:link>http://adventure-php-framework.org/Seite/Formulare</doku:link></li>
</ul>
<br />
<h6 id="Chapter-Erweiterbarkeit-der-GUI-Komponenten"><a href="#Chapter-Erweiterbarkeit-der-GUI-Komponenten">Erweiterbarkeit der GUI-Komponenten</a></h6>
Die unter "Handling von Controllern" genannten Seiten beinhalten neben reinem HTML-Text auch XML-Tags,
die den Inhalt formatiert ausgeben. Wie auf der Benchmark-Seite zu sehen ist, werden dort
PHP-Code-Snippets gehighlighted angezeigt. Generiert werden diese formatierten Code-Fragmente von
einer Taglib, die unter <doku:link>http://adventure-php-framework.org/Seite/TagLibsErstellen</doku:link>
in Kapitel 2.1 beschrieben ist. <br />
Für diese Aufgabe wartet CakePHP mit den ViewHelpern auf, die beliebig erweitert werden
können. Hier ist jedoch nicht das Verarbeiten von XML-Tags vorgesehen. Nach einer Recherche zu
diesem Thema im Manual und den angeschlossenen Resourcen wurde der Autor unter
<doku:link>http://rossoft.wordpress.com/2006/06/20/custom-html-tags-widgethelper/</doku:link> fündig.
Hier wurde auf Basis der ViewHelper ein <strong>WidgetHelper</strong> implementiert, der generisch
XML-Tags parsen kann. Erweitert man diesen, kann man seinen eigenen WidgetHelper implementieren, der
beliebige Formatierungsaufgaben an Hand von XML-Tags vornehmen kann. Dazu bindet der Entwickler den
WidgetHelper ein und erweitert diesen um die gewünschte Funktionalität. Um beim Beispiel
PHP-Code-Highlighting zu bleiben gestaltet sich die Implementierung wie folgt:
<gen:highlight type="php">
require_once(dirname(__FILE__) . DS . 'widget_helper.php');

class PHPHighlightWidgetHelper extends WidgetHelper {

   /**
    *  Tag definieren.
    */
   private $tag = array('php:highlight');

   /**
    *  Tag-Parser-Methode der Form "tag_{prefix}_{class}".
    */
   public function tag_php_highlight($attr,$inner_html){

      // Zeilenumbrüche entfernen
      $HighlightedContent = highlight_string(
                                             trim('<?php'.ltrim(rtrim($inner_html),"\x0A..\x0D").' ?>'),
                                             true
                                            );

      // PHP-Anfangstag ersetzen
      $HighlightedContent = str_replace('< font color="#007700">&lt;?< /font>',
                                        '',
                                        $HighlightedContent);
      $HighlightedContent = str_replace('< font color="#0000BB">&lt;?php&nbsp;',
                                        '< font color="#0000BB">',
                                        $HighlightedContent);
      $HighlightedContent = str_replace('< font color="#0000BB">php',
                                        '< font color="#0000BB">',
                                        $HighlightedContent);
      $HighlightedContent = str_replace('< font color="#0000BB">&nbsp;< /font>',
                                        '',
                                        $HighlightedContent);

      // PHP-Endtag ersetzen
      $HighlightedContent = str_replace('< font color="#0000BB">?&gt;< /font>','',$HighlightedContent);

      // Code im DIV zurückgeben
      return '< div class="phpcode">'.$HighlightedContent.'< /div>';

   }

}
</gen:highlight>
Nach diesem Schema können nun auch die übrigen XML-Tag-Funktionalitäten wie
<ul style="font-weight: bold;">
  <li>&lt;file:highlight /&gt;</li>
  <li>&lt;doku:navigation /&gt;</li>
</ul>
nachgebaut werden.
<br />
<br />
<br />
<h6 id="Chapter-Komplexe-Layouts"><a href="#Chapter-Komplexe-Layouts">Komplexe Layouts</a></h6>
Problematisch ist das Bauen von beliebig tief verschachtelten Templates, was bei der Einbindung
weiterer dynamischer Bereiche in die Seite zeigt. Statische Bereiche wie wie Menü und Top-Menü
hingegen können über <strong>Elements</strong> eingebunden werden, die jedoch nur statischen
HTML-Code erzeugen können. Eine Art "Controller für Elements", mit dem weiterer dynamischer
HTML-Code generiert werden kann - um beispielsweise ein Menü aus einem Model-Objekt darzustellen -
ist nicht vorgesehen. Konkret wurde das Menü, das Top-Menü und der News-Bereich in drei
eigenständige Elemente ausgelagert und unter <strong>/apps/views/elements</strong> abgelegt. Im
Layout kann nun per
<gen:highlight type="php">
   echo $this->renderElement('menu');
</gen:highlight>
das Menü eingebunden werden. Gleiches gilt für Top-Menü und News-Bereich.
<br />
<br />
Eine Möglichkeit der Auslagerung stellen die so genannten <strong>Components</strong> dar.
Eine detaillierts Beschreibung ist unter <doku:link>http://manual.cakephp.org/chapter/components</doku:link>
zu finden. Mit Hilfe dieser Methodik kann die Logik des Menüs aus dem Controller ausgelagert werden
und der Controller muss sich primär nur um seine Aufgabe kümmern.<br />
Hier wurde jedoch keine weitere Prüfung unternommen, da keine Beschreibungen für eine
offizielle Lösung unter den CakePHP-Seiten gefunden werden konnte. Ansätze waren unter
<ul>
  <li><doku:link>https://trac.cakephp.org/ticket/2586</doku:link> (Smarty & PHPTAL)</li>
  <li><doku:link>http://cakeforge.org/snippet/detail.php?type=snippet&id=6</doku:link> (SmartyView)</li>
</ul>
zu finden.
<br />
<br />
<br />
<h6 id="Chapter-FormularDesign"><a href="#Chapter-FormularDesign">FormularDesign</a></h6>
Ein sehr häufig wiederkehrendes Thema ist Formular-Design. Darunter fällt das Erstellen und
Verarbeiten eines Formulars. Dazu bietet CakePHP die HTML- bzw. Form-Helper an. Eine detaillierte
Beschreibung findet sich unter <doku:link>http://manual.cakephp.org/chapter/helpers</doku:link>. Zu
Evaluierungszwecken wurde versucht das in den Anforderungen beschriebene Kontaktformular nachzubauen.
Um das Formular in die bereits bestehende Seite einzubinden wird ein neues View-Template mit dem
Namen <em>formular_test.html</em> unter <em>/apps/views/demosite</em> angelegt. Dies hat folgenden
Inhalt:
<gen:highlight type="apf-xml">
  &lt;font style="font-size: 26px; font-weight: bold;"&gt;Kontakt-Formular&lt;/font&gt;
  &lt;br /&gt;
  &lt;br /&gt;
  Wenn Sie mit mir in Kontakt treten möchten, dann benutzen Sie einfach dieses Formular. Geben Sie Ihre
  Nachricht ein und schon kann es los gehen. Ich werden mich dann umgehend mit Ihnen in Verbindung
  setzten. &lt;strong&gt;Bitte füllen Sie das Formular vollständig aus!&lt;/strong&gt;.
  &lt;br /&gt;
  &lt;br /&gt;
  &lt;?php echo $html-&gt;formTag('/Seite/FormularTest'); ?&gt;
    &lt;span style="width: 47px; border: 0px solid black; margin-right: 69px;"&gt;Person:&lt;/span&gt;
    &lt;?php
     echo $html->selectTag('Contact/person',
                           array(
                                 '1' => 'Max Mustermann',
                                 '2' => 'Bianka Mustermann'
                           ),
                           null,
                           array(
                                 'class' => 'eingabe_feld'
                                 )
                          );
    ?&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;span style="width: 56x; border: 0px solid black; margin-right: 64px;"&gt;Ihr Name:&lt;/span&gt;
    &lt;?php
       echo $html-&gt;input('Contact/name', array(
                                                  'class' =&gt; 'eingabe_feld',
                                                  'style' =&gt; 'width: 280px;'.$ContactNameStyle
                                                 )
                           );
    ?&gt;
    &lt;?php echo $ContactNameErrorMessage; ?&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;span style="width: 108px; border: 0px solid black; margin-right: 10px;"&gt;Ihre eMail-Adresse:&lt;/span&gt;
    &lt;?php
       echo $html-&gt;input('Contact/email', array(
                                                   'class' =&gt; 'eingabe_feld',
                                                   'style' =&gt; 'width: 280px;'.$ContactEMailStyle
                                                  )
                            );
    ?&gt;
    &lt;?php echo $ContactEMailErrorMessage; ?&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;span style="width: 57px; border: 0px solid black; margin-right: 61px;"&gt;Ihr Betreff:&lt;/span&gt;
    &lt;?php
       echo $html-&gt;input('Contact/subject', array(
                                                     'class' =&gt; 'eingabe_feld',
                                                     'style' =&gt; 'width: 280px;'.$ContactSubjectStyle
                                                    )
                            );
    ?&gt;
    &lt;?php echo $ContactSubjectErrorMessage; ?&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    Ihre Nachricht:
    &lt;br /&gt;
    &lt;?php
       echo $html-&gt;textarea('Contact/note', array(
                                                     'class' =&gt; 'eingabe_feld',
                                                     'style' =&gt; 'height: 200px; width: 400px; overflow: auto;'
                                                    )
                              );
    ?&gt;
    &lt;?php echo $html-&gt;tagErrorMsg('Contact/note', 'Note is required.'); ?&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;?php echo $html-&gt;submit('Absenden',array('class' =&gt; 'eingabe_feld')); ?&gt;
  &lt;/form&gt;
</gen:highlight>
Das Template zeigt, dass der Entwickler oder Template-Bauer mit dem HTML-Helper die Möglichkeit
hat Formular-Felder per Helper-Funktionen generieren zu lassen. Hier stehen ihm beispielsweise die
Methoden <strong>input()</strong> oder <strong>textarea()</strong> für die Erstellung von ein-
und mehrzeiligen Eingabefeldern sowie <strong>formTag()</strong> zur Ausgabe eines Formural-Anfangs-
Tags zur Verfügung. Die Unterstützung zur Generierung von Multi-Select-Feldern ist nicht
vorgesehen, es ist für alle generierbaren Felder jedoch eine automatische Befüllung nach
dem GET-/POST-Request implementiert, was dem Template-Bauer bereits einige Arbeit abnimmt.
<br />
<br />
Wie bereits erwähnt, soll das Formular mit einer Feld-Validierung ausgestattet werden, für
die CakePHP leider out-of-the-box keine Helper-Tools bietet. Um das zu erreichen wurde der Controller
um die Methode <strong>FormularTest()</strong> erweitert. Da die Methode auf Grund des oben
beschriebenen Routing-Eintrags nicht aufgerufen wird, muss das Routing wie folgt geändert werden:
<gen:highlight type="php">
  $Route->connect('/Seite', array('controller' => 'Seite', 'action' => 'Startseite','StartSeite'));
  $Route->connect('/Seite/FormularTest', array('controller' => 'Seite', 'action' => 'FormularTest'));
  $Route->connect('/Seite/*', array('controller' => 'Seite', 'action' => 'display'));
</gen:highlight>
Hier muss die "spezielle" Action vor der allgemeinen stehen, da sonst die allgemeine Route <strong>vor</strong>
der speziellen gefunden wird.
<br />
<br />
Wie der obige Quellcode auch zeigt, wurde im Controller die set()-Methode verwendet um zusätzliche
Stile über View-Attribute an die Eingabe-Elemente zu hängen. Diese können dann bei
erfolgter Validierung entsprechend gesetzt werden. Die Ausgabe der Fehlermeldung wurde ebenso
gelöst. Die unter <doku:link>http://manual.cakephp.org/chapter/validation</doku:link> beschriebenen
Validations-Möglichkeiten helfen bei der Prüfung der Benutzer-Eingaben nur bedingt, da die auf der Seite
beschriebenen nur das Model betreffen, nicht die Formular-Eingaben, die ohne Einbezug eines Model-Objekts
verarbeitet werden.
<br />
<br />
Der im nächsten Kasten gezeigte Teil des Controllers kann dafür eine Lösung darstellen:
<gen:highlight type="php">
public function FormularTest(){

   // Ist Formular abgeschickt worden?
   if(!empty($this->data['Contact'])){

      // Merker für die Validierung setzen
      $valid = true;

      // Validierung Name
      if(isset($this->data['Contact']['name']) && strlen($this->data['Contact']['name']) > 3){
         $this->set('ContactNameStyle','');
         $this->set('ContactNameErrorMessage','');
      }
      else{
         $this->set('ContactNameErrorMessage',' Bitte geben Sie einen Namen an!');
         $this->set('ContactNameStyle',' border: 2px solid red;');
         $valid = false;
      }

      // Validierung Betreff
      if(isset($this->data['Contact']['subject']) && strlen($this->data['Contact']['subject']) > 3){
         $this->set('ContactSubjectStyle','');
         $this->set('ContactSubjectErrorMessage','');
      }
      else{
         $this->set('ContactSubjectStyle',' border: 2px solid red;');
         $this->set('ContactSubjectErrorMessage',' Bitte geben Sie ein Betreff an!');
         $valid = false;
      }

      // Validierung E-Mail
      if(
         isset($this->data['Contact']['email'])
         &&
         ereg("^([a-zA-Z0-9\.\_\-]+)@([a-zA-Z0-9\.\-]+\.[A-Za-z][A-Za-z]+)$",$this->data['Contact']['email'])
         &&
         strlen($this->data['Contact']['email']) > 3
        ){
         $this->set('ContactEMailStyle','');
         $this->set('ContactEMailErrorMessage','');
      }
      else{
         $this->set('ContactEMailStyle',' border: 2px solid red;');
         $this->set('ContactEMailErrorMessage',' Bitte geben sie eine korrekte E-Mail-Adresse an!');
         $valid = false;
      }


      // Falls Formular valide ist, abschicken
      if($valid == true){

         // E-Mail versenden
         $this->redirect('/Seite/FormularDanke');

      }

   }
   else{

      // Standard-Werte setzen, da sonst Fehler mit undefined variable geworfen werden
      $this->set('ContactNameStyle','');
      $this->set('ContactEMailStyle','');
      $this->set('ContactSubjectStyle','');
      $this->set('ContactNoteStyle','');
      $this->set('ContactNameErrorMessage','');
      $this->set('ContactEMailErrorMessage','');
      $this->set('ContactSubjectErrorMessage','');

   }

}
</gen:highlight>
Fazit ist, dass die Validierung eines Formulars weitestgehend selbst erstellt werden muss, dem
Entwickler aber bereits einige Aufgaben im Formular-Handling abgenommen werden. Insbesondere das
Speichern von Model-Objekten wird sehr einfach ermöglicht.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-1-5-URL-Handling"><a href="#Chapter-3-1-5-URL-Handling">3.1.5. URL-Handling</a></h5>
<br />
<h6 id="Chapter-Unterstuetzung-von-URL-Rewriting"><a href="#Chapter-Unterstuetzung-von-URL-Rewriting">Unterstützung von URL-Rewriting</a></h6>
URL-Rewriting wird von CakePHP nativ unterstützt. Hierzu bringt das Release-Package die entsprechenden
Apache-RewriteRules mit, die alle Anfragen auf die zentrale Bootstrap-Datei <em>index.php</em>
weiterleiten. Die dafür vorgesehenen Programmteile extrahieren die Controller-Anweisungen aus
der Request-Variable <strong>url</strong>. Ein Betrieb ohne URL-Rewriting konnte nach etwas Suchen
in einem Appendix des Tutorials (<doku:link>http://manual.cakephp.org/appendix/blog_tutorial</doku:link>,
Sektion 6) gefunden werden. Dort wird beschrieben, dass in der Datei <strong>/app/config/core.php</strong>
die Zeile
<gen:highlight type="php">
  define ('BASE_URL', env('SCRIPT_NAME'));
</gen:highlight>
auskommentiert und alle (!) <strong>.htaccess</strong>-Dateien im Release-Package gelöscht werden.
Darüber hinaus muss die VHOST-Konfiguration so angepasst werden, dass der DocumentRoot auf das
Verzeichnis <strong>/app/webroot</strong> zeigt.
<br />
<br />
<h6 id="Chapter-Generik-des-URL-Layouts"><a href="#Chapter-Generik-des-URL-Layouts">Generik des URL-Layouts</a></h6>
Das URL-Layout hat zur Zeit der Auslieferung das Format
<gen:highlight type="apf-xml">
 http://www.example.com/{Controller}/{Action}[/{Param1}/.../{ParamN}]
</gen:highlight>
Über die Routing-Einträge können unterschiedliche URL-Teile als Kenner für
bestimmte Aktionen verwendet werden. Das Aufbrechen des URL-Layouts hinsichtlich der Ausführung
mehrerer Controller zur Laufzeit ist jedoch nicht möglich.
<br />
<br />
<br />
<h6 id="Chapter-URL-Manipulations-Tools-Linkgenerierung"><a href="#Chapter-URL-Manipulations-Tools-Linkgenerierung">URL-Manipulations-Tools / Linkgenerierung</a></h6>
Zur Generierung von URLs steht der HTML-Helper zur Verfügung. Die Methoden <em>link()</em>,
<em>linkEmail()</em> und <em>url()</em> sind jedoch nur zur vereinfachten Ausgabe gedacht, nicht
zur Manipulation einer URL. Siehe hierzu auch <doku:link>http://api.cakephp.org/class_html_helper.html</doku:link>.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-1-6-Design-des-Frameworks"><a href="#Chapter-3-1-6-Design-des-Frameworks">3.1.6. Design des Frameworks</a></h5>
<br />
<h6 id="Chapter-Umfang-der-mitgelieferten-Komponenten"><a href="#Chapter-Umfang-der-mitgelieferten-Komponenten">Umfang der mitgelieferten Komponenten</a></h6>
CakePHP wird mit einer Vielzahl von Komponenten ausgeliefert. Dies sind Core-Libraries im Ordner
<em>/cake</em> und Beispiel-Dateien unter <em>/apps</em>. Zudem gibt es zahlreiche Plugins und
Erweiterungen, die unter <doku:link>http://cakeforge.org</doku:link>. Die Bakery unter
<doku:link>http://bakery.cakephp.org</doku:link> umfasst viele Artikel und HOWTOs, denen Funktionen und
weitere Komponenten entnommen werden können.<br />
Ein weitere Punkt sind Komponenten wie ACL und Plugins, die es ermöglichen Anwendungen dynamisch
und je nach Anforderung zu erweitern. Informationen hierzu finden sich im Manual unter
<doku:link>http://manual.cakephp.org/chapter/acl</doku:link> und
<doku:link>http://manual.cakephp.org/chapter/plugins</doku:link>. Es sei jedoch darauf hingewießen,
dass das hier angesprochene ACL-Package nicht die Aufgabe der Benutzer-Authentifikation übernimmt,
sondern lediglich Zugriffsrechte von Objekten auf Objekte regelt. Ersteres muss nach wie vor selbst
implementiert werden.
<br />
<br />
<br />
<h6 id="Chapter-Einsatz-von-Design-Pattern"><a href="#Chapter-Einsatz-von-Design-Pattern">Einsatz von Design-Pattern</a></h6>
Die Entwickler von CakePHP setzen auf objektorientierte Programmierung sowohl in PHP 4 als auch in
PHP 5. Als eines der herausragenden Pattern wird das Model-View-Controller-Pattern (MVC) betrachtet,
um das die Core-Klassen designed sind. Bei der Request-Verarbeitung setzt CakePHP auf einen
Application-Controller, der einem Frontcontroller ähnlich ist.<br />
Ganzheitlich betrachtet existiert ein durchgängiges Objektmodell, bei dem alle Klassen
auf einer Basis-Klasse (Object) aufsetzen. Diese behandelt grundlegende Themen und ahmt das Konstrukor- /
Destruktor-Verhalten von PHP 5 in PHP 4 nach. Global betrachtet kann daher von einem guten
Software-Design nach anerkannten Design-Pattern gesprochen werden. Unter
<doku:link>http://astore.amazon.com/cakesoftwaref-20</doku:link> werden über einen Amazon-Shop
Bücher zum Thema Design-Pattern angeboten, die vom CakePHP-Entwickler-Team empfohlen werden.
<br />
<br />
<br />
<h6 id="Chapter-Struktur-des-Quellcodes-Design-der-Klassen"><a href="#Chapter-Struktur-des-Quellcodes-Design-der-Klassen">Struktur des Quellcodes / Design der Klassen</a></h6>
Das Release-Package ist sehr übersichtlich aufgebaut und die Unterscheidung von Core-Bestandteilen
und eigenen Dateien fällt leicht. Es wurde eine strikte Benennungs- und Strukturierungskonvention
eingeführt, die durch die Komponenten <em>Inflector</em> unterstützt wird. Anwender-
Bibliotheken werden unter <em>/apps</em> abgelegt und bilden eine eigene Struktur. Klassen und
Methoden sind sprechend benannt und im Quellcode gut dokumentiert.
<br />
<br />
<br />
<h6 id="Chapter-Einsetzbarkeit-fuer-mehrere-Applikationen"><a href="#Chapter-Einsetzbarkeit-fuer-mehrere-Applikationen">Einsetzbarkeit für mehrere Applikationen</a></h6>
Das CakePHP-Framework bringt keine Logik für den Betrieb von Applikationen und Modulen unter
unterschiedlichen Umgebungen mit. Die Klasse <strong>Configure</strong> kann zwar als Mittel zur
Konfiguration eines Controllers oder einer beliebigen anderen Klasse eingesetzt werden, jedoch ist
hier keine weitere Abstraktionsmöglichkeit geschaffen, die nativ mehrere Umgebungen unterstützt,
so dass eine Applikation, oder ein Modul mit ein und dem selben Quellcode in mehreren Projekten
eingesetzt werden kann. Es gibt jedoch die Möglichkeit, dieses Verhalten durch Setzen weiterer
Konstanten zu erzeugen.
<br />
<br />
<br />
<h6 id="Chapter-Erweiterbarkeit"><a href="#Chapter-Erweiterbarkeit">Erweiterbarkeit</a></h6>
Durch das modulare und gut strukturierte Design des Frameworks ist es ohne weiteres möglich die
Funktionalität des Frameworks in allen Bereichen zu erweitern. Lediglich im GUI-Bereich
stößt der Entwickler ohne Anpassung schnell an die Grenzen des Möglichen (siehe 3.1.4).
<br />
<br />
<br />
<h6 id="Chapter-Scaffolding"><a href="#Chapter-Scaffolding">Scaffolding</a></h6>
Das Rapid-Development-Feature ist bei CakePHP sehr stark ausgeprägt. Zum einen gibt es eine Vielzahl
an Tutorials, zum anderen ist der Scaffolding-Kern so gut implementiert, dass ein Termin-Kalender
in weniger als 10 Handgriffen einsatzbereit und voll funktionsfähig war. Das hier angesprochene
Tutorial kann unter <a href="/frontend/media/newbie-cakephp.pdf" title="newbie-cakephp.pdf">newbie-cakephp.pdf</a>
heruntergeladen werden. Die Vielfalt der Möglichkeiten hier nochmals zu beschreiben würde
den Rahmen des Artikels sprengen und liegt nicht im Haupt-Fokus. Aus diesem Grund sei an dieser Stelle
auf die Webseite verwiesen, die zum Thema Scaffolding unter
<doku:link>http://manual.cakephp.org/chapter/scaffolding</doku:link> mit einer ausführlichen
Beschreibung aufwartet.<br />
Ein weiteres Produktivitäts-Mittel ist das Tool <strong>bake</strong>, ein Tool, mit dem man
eine Applikation automatisch erstellen kann - zumindest das Grundgerüst. Unter
<doku:link>http://api.cakephp.org/bake_8php-source.html#l00151</doku:link> wird der Code beschrieben,
im Manual finden sich jedoch leider keine ausführlichen Ressourcen zu diesem Thema. Auch im Release
ist das Tool standardmäßig leider nicht enthalten.
<br />
<br />
<br />
<h5 id="Chapter-3-1-7-Dokumentation"><a href="#Chapter-3-1-7-Dokumentation">3.1.7. Dokumentation</a></h5>
<br />
<h6 id="Chapter-Dokumentation-des-Quellcodes"><a href="#Chapter-Dokumentation-des-Quellcodes">Dokumentation des Quellcodes</a></h6>
Ist der Entwickler mit einem komplexen Problem konfrontiert, ist der Blick in den Quellcode oft die
einzige Rettung. Bei CakePHP kann die Lösung recht schnell gefunden werden, da der Quellcode
übersichtlich gestaltet und gut dokumentiert ist. Negativ fällt ins Auge, dass sich sehr
viele Methoden der Funktion <strong>func_get_args()</strong> bedienen um die Argumente bei Aufruf
einer Methode auszulesen. Dies erschwert an manchen Stellen das Nachvollziehen der Methoden-Logik
und macht den Code intransparent.
<br />
<br />
<br />
<h6 id="Chapter-API-Dokumentation"><a href="#Chapter-API-Dokumentation">API-Dokumentation</a></h6>
Die API-Dokumentation von CakePHP ist online unter <doku:link>http://api.cakephp.org</doku:link>
verfügbar. Als Verbesserungsvorschlag wäre anzubringen, die API-Dokumentation mit dem
Release mit auszuliefern, damit diese für den Entwickler immer in der aktuellen Version
verfügbar ist.
<br />
<br />
<br />
<h6 id="Chapter-Einfuehrungen,-Tutorials-und-Anwendungs-Beispiele">Einführungen, Tutorials und Anwendungs-Beispiele</h6>
Wie bereits weiter oben angesprochen finden sich unter <doku:link>http://manual.cakephp.org/</doku:link>
und unter <doku:link>http://bakery.cakephp.org/</doku:link> viele Tutorials und Anwendungsbeispiele.
<doku:link>http://cakeforge.org/top/mostactive.php</doku:link> zeigt eine Übersicht der aktiven
Projekte, die auf CakeForge - dem Sourceforge der Cake Software Foundation - gehostet werden. Hierunter
finden sich Projekte wie "JiveCMS", "MiniCalendar" oder "TinyAuth", die CakePHP als Basis für
ihre Entwicklungen nutzen. Insbesondere die Projekte können für noch nicht erfahrene Anwender
als Quelle für Umsetzungsbeispiele verwendet werden.<br />
Kritikwürdig ist die etwas oberflächliche Art und Weise der Beispiele im Manual, die gerade
Anfänger etwas im Dunkeln tappen lässt. An vielen Stellen ist der Blicke in die API-Doku
und den Quellcode nicht vermeidbar was für Neulinge zunächst abschreckend wirkt. Hier wäre
mehr Ausführlichkeit in den Beispielen eine gerne gesehene Verbesserung.<br />
Anzumerken ist zudem, dass die angegebenen Literatur-Stellen nur in englischer Sprache verfügbar
sind. Die Seiten unter <em>http://cakephp.org</em> sind zudem nicht X-Browser kompatibel. Dabei werden
vor allem IE- und Opera-Benutzer mit verzerrten Layouts empfangen.
<br />
<br />
<br />
<h6 id="Chapter-ChangeLogs-Migrations-Hinweise-für-API-Aenderungen">ChangeLogs / Migrations-Hinweise für API-Änderungen</h6>
Zu den auf der Webseite herunterladbaren Versionen existiert jeweils ein Changelog, mit dem der
Entwickler bei API-Änderungen schnell einen Überblick über die veränderten
Bereiche hat.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-1-8-Support"><a href="#Chapter-3-1-8-Support">3.1.8. Support</a></h5>
CakePHP verfügt mit <doku:link>http://www.nabble.com/CakePHP-f16511.html</doku:link> und
weiteren nicht direkt als CakePHP-Forum deklarierte Support-Foren über eine große Support-
Struktur. Das CakePHP-Team selbst bereibt einen IRC-Channel. Zudem existieren mehrere Newsgroups
und Mailing-Listen auf denen der Entwickler Rat suchen kann. Mit der Bakery
(<doku:link>http://bakery.cakephp.org/</doku:link>) existiert darüber hinaus ein Portal / Wiki,
auf dem die aktuellsten News und viele interessante Artikel zu CakePHP zu finden sind. U.a. gibt es
dort eine "Code-Snippet"-Ecke, in der immer wieder gesuchte Code-Schnipsel zu finden sind.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-1-9-Benchmark"><a href="#Chapter-3-1-9-Benchmark">3.1.9. Benchmark</a></h5>
Im Benchmark-Test konnte mit den CakePHP eigenen Mittel eine Rendering-Zeit von durchschnittlich
<strong>0.1134 s</strong> gemessen werden. Rendering-Zeit ist bei CakePHP die Zeit der kompletten
Abarbeitung des Codes.
<br />
<br />
<br />
&raquo; Weiter auf <a href="./?Seite=052-PHP-Frameworks-im-Test-4" title="PHP-Frameworks im Test (4)">Seite 4</a> (Bewertung CodeIgniter).
<br />
<br />
<br />
<core:importdesign namespace="modules::comments::pres::templates" template="comment" categorykey="de_051" />