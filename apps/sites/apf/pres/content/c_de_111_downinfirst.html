<doku:title parent="071" tags="apf,installation,download,erste schritte,anleitung,einstieg,download" title="Download, Installation und erste Schritte" urlname="Download-Installation-und-erste-Schritte">
   Das Tutorial beschreibt Schritt für Schritt die Einrichtung des Adventure PHP Framework vom Download bis zur
    &quot;Hallo Welt&quot; Applikation.
</doku:title>
<img src="http://media.adventure-php-framework.org/content/first-steps.png" alt="Download, Installation und erste Schritte" class="leftTeaser"/>
<h3 id="Chapter-1-Einleitung"><a href="#Chapter-1-Einleitung">1. Einleitung</a></h3>
In diesem Tutorial wird Schritt für Schritt erklärt, wie man das Adventure PHP Framework
(kurz APF) einrichtet.

<h3 id="Chapter-2-Anforderungen"><a href="#Chapter-2-Anforderungen">2. Anforderungen</a></h3>
Es wird davon ausgegangen, dass ein PHP fähiger Server zur Verfügung steht. Für einen
lokalen Testserver unter Windows eignet sich
<a class="external" href="http://www.apachefriends.org/de/xampp.html" title="XAMPP für Windows">XAMPP</a> sehr
gut. Es beinhaltet eine Installation aller wichtigen Serverkomponenten, wie Apache, PHP, MySQL, etc.
Je nachdem wie euer System aufgebaut ist, müssen die Pfade angepasst werden. Auf LINUX/UNIX
könnt ihr die PHP Bibliotheken mit dem favorisierten Paket-Manager direkt installieren.

<h3 id="Chapter-3-Download"><a href="#Chapter-3-Download">3. Download</a></h3>
Unter <a href="http://adventure-php-framework.org/Seite/008-Downloads" title="APF Downloads">Downloads</a>
findet man stets die aktuellste Version des APF. Zum Zeitpunkt der Erstellung des Tutorials ist
dies die Version 1.10.
<br />
<br />
Bei den Release-Dateien wird zwischen folgenden Paket-Typen unterschieden:
<ul>
   <li>
      Beispiel-Projekt: (apf-demopack-*):
      <br />
      Enthält die notwendigen APF Dateien, sowie einige Anwendungsbeispiele. Dieses Paket ist
      speziell für Einsteiger gedacht.
   </li>
   <li>
      Framework-Code-Release: (apf-codepack-*):
      <br />
      Enthält die notwendigen APF Dateien. Dieses Paket ist für den Produktiveinsatz
      gedacht.
   </li>
   <li>
      Beispiel-Konfigurationsdateien: (apf-configpack-*):
      <br />
      Enthält nur Konfigurationsdateien für einige Module des APF, an denen man sich bei
      der Erstellung seiner Konfigurationen orientieren kann.
   </li>
</ul>
Für dieses Tutorial wird das Framework-Code-Release verwendet, welches Sie nun herunterladen
können.

<h3 id="Chapter-4-Installation"><a href="#Chapter-4-Installation">4. Installation</a></h3>
Zuerst ist es wichtig die Ordnerstruktur zu verstehen. Im Tutorial wird davon ausgegangen, dass der
Document-Root (der Ordner der geöffnet wird wenn man <em>http://localhost/</em> im Browser aufruft)
unter <em>/xampp/htdocs</em> liegt.
<br />
<br />
Das APF ist so aufgebaut, dass nur eine einzige Datei (Bootstrap Datei) aufgerufen wird. Der Rest
wird über URL-Parameter gesteuert. Für die Bootstrap Datei (z.B. <em>index.php</em>) legen
wir die Ordner <em>/xampp/htdocs/APF/sites/helloworld/</em> an. Hier werden außerdem öffentlich
zugängliche Dateien platziert (z.B. Bilder).
<br />
<br />
Aus Sicherheitsgründen sollten die Dateien des APF nicht öffentlich zugänglich sein,
denn sonst können Konfigurationsdateien einfach von außen gelesen werden. Die sicherste
Variante ist es, wenn man die Dateien des APF oberhalb des Wurzelverzeichnisses ablegt. Sollte dies
aus irgendeinem Grund (wie z.B. einem Webspace, bei dem man nur  Zugriff auf das Wurzelverzeichnis
hat) nicht möglich sein, fahren Sie bei Punkt 4.2 fort, wo eine zusätzliche Sicherung
erstellt wird, um den Zugriff von außen zu unterbinden, andernfalls folgen Sie den Anweisungen
aus 4.1.

<h4 id="Chapter-4-1-Installation-ausserhalb-Root-Verzeichnis"><a href="#Chapter-4-1-Installation-ausserhalb-Root-Verzeichnis">4.1. Installation außerhalb des Root-Verzeichnisses</a></h4>
Da das Root-Verzeichnis unter <em>/xampp/htdocs/</em> liegt, legen wir das Verzeichnis
<em>/xampp/APF/</em> an. Jetzt öffnen wir das zuvor heruntergeladene Paket, und entpacken es
in das eben erstellte Verzeichnis.
<br />
<br />
Jetzt sollte man folgende Ordnerstruktur vorfinden:
<gen:highlight type="code">
/xampp/APF/apps/
    core/
    modules/
    tools/
</gen:highlight>
Wenn dem so ist, kann Punkt 4.2 übersprungen werden.

<h4 id="Chapter-4-2-Installation-innerhalb-Root-Verzeichnis"><a href="#Chapter-4-2-Installation-innerhalb-Root-Verzeichnis">4.2. Installation innerhalb des Root-Verzeichnisse</a></h4>
Hierbei muss darauf geachtet werden, dass der Ordner in dem sich die APF Dateien befinden vor dem
Zugriff von außen geschützt werden muss. Wir haben ja schon das Verzeichnis 
<em>/xampp/htdocs/APF/</em> angelegt. Dort entpacken wir jetzt die zuvor heruntergeladene Datei.
Jetzt sollte die Ordnerstruktur
<gen:highlight type="code">
/xampp/htdocs/APF/apps/
    core/
    modules/
    tools/
</gen:highlight>
vorhanden sein.
<br />
<br />
Um das Verzeichnis vor dem Zugriff von außen zu schützen, legen wir die Datei
<strong>.htaccess</strong> unter <em>/xampp/htdocs/APF/apps/</em> an:
<gen:highlight type="shell">
# Zugriff von außen unterbinden
Order allow,deny
deny from all
</gen:highlight>
<div class="hint">
   Beim übertragen der .htaccess Datei via FTP muss die übertragungsmethode auf ASCII
   gestellt werden, andernfalls kann es zu Problemen kommen.
</div>

<h3 id="Chapter-5-Erste-Schritte"><a href="#Chapter-5-Erste-Schritte">5. Erste Schritte</a></h3>
<div class="hint">
   Der Einfachheit wegen wird ab sofort auf den kompletten Pfad verzichtet. <em>/apps/</em> ist ab jetzt der
   geschützte APF Ordner, und <em>/APF/</em> der öffentlich zugängliche Ordner.
</div>
<br />
Zuerst eine kurze Erklärung der einzelnen Ordner:
<ul>
   <li>
      <strong>/apps/core/</strong>: Hier befinden sich alle Systemdateien des APF, welche zwingend
      notwendig sind.
   </li>
   <li>
      <strong>/apps/modules</strong>: Hier befinden sich optionale Module, welche das APF
      mitliefert. Diese müssen jedoch erst konfiguriert werden. Wie das geht kann unter
      den Tutorials auf der
      <int:link pageid="119" anchor="Module">Übersichts-Seite der vorhandenen Module</int:link>
      eingesehen werden.
   </li>
   <li>
      <strong>/apps/tools</strong>: Hier findet man viele kleinere Tools welche man verwenden kann.
   </li>
</ul>
Jetzt legen wir die Datei <strong>/APF/sites/helloworld/index.php</strong> an. Wir werden eine
einfache "Hallo Welt" Applikation schreiben, um die Funktionalität zu erklären.
<br />
<br />
<div class="hint">
   Im Folgenden wird der Begriff <em>Namespace</em> statt der Bezeichung <em>Ordner</em> verwendet.
   Das hat folgenden Hintergrund: der Namespace ist eine relative Adressierung vom
   <strong>/apps</strong> Ordner aus. Beim Namespace müssen alle "/" im Ordner-Pfad durch "::"
   ersetzt werden.
</div>
<br />
Es muss nun der Namespace für das Template erstellt werden. Hierzu legen wir die Ordner
<strong>/apps/sites/helloworld</strong> an. Darin werden die Ordner <strong>/pres/templates</strong>
angelegt. Da das APF auf einem 3 Schichten Modell aufbaut (Präsentation, Verwaltung und Daten),
steht das <strong>pres</strong> hier für die Präsentationssschicht, in der unter dem Ordner
<strong>/templates</strong> die <strong>.html</strong> Templates gespeichert werden. Wir
benötigen für dieses Beispiel nur ein einziges Template:
<gen:highlight type="apf-xml">helloworld.html</gen:highlight>
In dieses Template schreiben wir jetzt einfach folgenden Inhalt:
<gen:highlight type="apf-xml">Hallo Welt! Hello World!</gen:highlight>
Jetzt editieren wir die zuvor angelegte index.php. Sie bekommt folgenden Inhalt (Erklärung
folgt darunter):
<gen:highlight type="php">
// Page-Controller einbinden (für den unter 4.1 konfigurierten Ordner)
include_once('../../../APF/apps/core/pagecontroller/pagecontroller.php');

// Page-Controller einbinden (für den unter 4.2 konfigurierten Ordner)
//include_once('../../apps/core/pagecontroller/pagecontroller.php');

// Front-Controller erzeugen und konfigurieren
import('core::frontcontroller', 'Frontcontroller');
$fC = &Singleton::getInstance('Frontcontroller');

// Request-Abarbeitung starten und Ergebnis zum Client senden
echo $fC->start('sites::helloworld::pres::templates', 'helloworld');
</gen:highlight>
<p>
   Zuerst wird der Page- und Front-Controller eingebunden. Hier muss die Variante gewählt werden,
   die bei der Installation verfolgt wurde. Als nächstes wird der Front-Controller erzeugt. Daraufhin
   wird das Template welches wir eben erstellt haben als Start-Template übergeben und der Front-Controller
   gestartet. Der erste Parameter ist dabei der Namespace, der zweite Parameter dann der Pfad zum
   Template, und der Name der Templatedatei. Namen werden im APF immer ohne die Dateiendung angegeben,
   da die Konvention des Frameworks schon sagt, wie diese lauten müssen (*.html für Templates,
   *.ini für Konfigurationsdateien, *.php für PHP-Dateien). Zuletzt per <em>echo</em> die erzeugte
   Seite ausgegeben.
</p>
<p>
   Die genaue Funktionsweise des Front-Controller kann unter <int:link pageid="012" /> nachgelesen
   werden.
</p>
<p>
   Um das Ergebnis zu betrachten rufen wir
</p>
<gen:highlight type="code">http://localhost/APF/sites/helloworld/index.php</gen:highlight>
auf.
Dort sollte nun <em>Hallo Welt! Hello World!</em> erscheinen.

<h3 id="Chapter-6-Fazit"><a href="#Chapter-6-Fazit">6. Fazit</a></h3>
Jetzt sollte die grundlegende Funktionalität des APF bekannt sein. Um die vielen anderen
Funktionen kennenzulernen, empfiehlt es sich noch ein paar weitere Tutorials zu lesen. Als
nächstes Tutorial schlage ich das
<a href="./?Seite=048-Webseite-erstellen" title="Webseite erstellen">Tutorial Webseite erstellen</a>
vor.

<div class="foreignAuthor">
   <img src="http://media.adventure-php-framework.org/content/ralf_schubert_screeze.gif" alt="Ralf Schubert findet das APF genial!"/>
   <p><em>Dieser Artikel wurde exklusiv für adventure-php-framework.org geschrieben.</em></p>
   <p class="author"><strong>Über den Autor:</strong></p>
   <p>
      <strong>Ralf Schubert</strong> ist begeisterter APF-Entwickler. Für ihn bietet es viele Vorteile
      gegenüber anderen Frameworks. Besonders gerne nutzt er die einfach Möglichkeit,
      wiederverwendbare Elemente zu erstellen.
   </p>
   <p>
      Um Neueinsteiger bei der Verwendung des APF zu unterstützen hat er ein Tutorial verfasst. Darin
      werden die ersten Schritte mit dem Framework erklärt.
   </p>
</div>

<core:importdesign namespace="modules::comments::pres::templates" template="comment" categorykey="de_111" />