<doku:title parent="100" tags="php,frameworks,test,cakephp,codeigniter,zend framework,adventure php framework,bewertung" title="PHP-Frameworks im Test (6)" urlname="PHP-Frameworks-im-Test-6">
  Der Artikel PHP-Frameworks im Test vergleicht unterschiedliche Frameworks. Basis der Bewertung ist
  ein Anforderungskatalog, der darauf Wert legt, dass der Entwickler einen möglichst
  vollständigen Werkzeugkasten an die Hand bekommt um effektiv Webseiten und Web-Applikationen
  entwickeln zu können.
</doku:title>
<h4 id="Chapter-3-4-Adventure PHP Framework">3.4. Adventure PHP Framework</h4>
<br />
<h5 id="Chapter-3-4-1-Allgemeines"><a href="#Chapter-3-4-1-Allgemeines">3.4.1. Allgemeines</a></h5>
<br />
<h6 id="Chapter-Roadmap-des-Projekts"><a href="#Chapter-Roadmap-des-Projekts">Roadmap des Projekts</a></h6>
Das Adventure PHP Framework legt <doku:link>http://adventure-php-framework.org/Seite/Roadmap</doku:link>
die Roadmap für Releases bis Mitte 2008 fest. Darin werden die Features der Releases aufgeführt,
so dass der Entwickler ein Gefühl, für die kommenden Erweiterungen für seine Projekte
bekommt.
<br />
<br />
<br />
<h6 id="Chapter-Aktualitaet-der-Version"><a href="#Chapter-Aktualitaet-der-Version">Aktualität der Version</a></h6>
Auf der Download-Seite des Projektes (<doku:link>http://adventure-php-framework.org/Seite/Downloads</doku:link>)
steht eine Übersicht über die aktuell veröffentlichten Releases zur Verfügung.
Im Fall des aktuellen Testkandidaten sind dies das stable Release 1.3 und 1.4, wobei die aktuelle
Version eine zu PHP 5 kompatible Version ist.
<br />
<br />
<br />
<h6 id="Chapter-Release-Packages-in-verschiedenen-Formaten"><a href="#Chapter-Release-Packages-in-verschiedenen-Formaten">Release-Packages in verschiedenen Formaten</a></h6>
Die Release-Packages liegen in der Form ZIP, TGZ und BZ2 vor. Die Dokumentation ist in separaten
Paketen und in unterschiedlichen Formaten (CHM, HTML+ZIP) erhältlich. Die zu einer Version
gehörigen Dokumentation kann auch online eingesehen werden.
<br />
<br />
<br />
<h6 id="Chapter-CVS-SVN-Repositories"><a href="#Chapter-CVS-SVN-Repositories">CVS/SVN-Repositories</a></h6>
Für das Adventure PHP Framework steht kein CVS/SVN-Repository zur Verfügung. Bugfix-Releases
sind nur nach Anfrage per Kontaktformular verfügbar.
<br />
<br />
<br />
<h6 id="Chapter-Bug-Tracking-Ticketing"><a href="#Chapter-Bug-Tracking-Ticketing">Bug-Tracking / Ticketing</a></h6>
Da das Projekt über keine Trac- oder JIRA-Installation verfügt wird Bug-Tracking und
Ticketing manuell über <doku:link>http://adventure-php-framework.org/Seite/Bugtracking</doku:link>
abgewickelt. Das hat den Nachteil, dass die Diskussionen zu Bugreports nur verzögert online
einsehbar sind.
<br />
<br />
<br />
<h6 id="Chapter-Version-fuer-PHP-4"><a href="#Chapter-Version-fuer-PHP-4">Version für PHP 4</a></h6>
Eine Version für PHP 4 ist erhältlich. Diese dient im aktuellen Release auch als
Haupt-Entwicklungs-Zweig (siehe Roadmap).
<br />
<br />
<br />
<h6 id="Chapter-Version-fuer-PHP-5"><a href="#Chapter-Version-fuer-PHP-5">Version für PHP 5</a></h6>
Die installierte Version ist zu PHP 5 (im Test: Version 5.2.1) kompatibel.
<br />
<br />
<br />
<h5 id="Chapter-3-4-2-Installation"><a href="#Chapter-3-4-2-Installation">3.4.2. Installation</a></h5>
<br />
<h6 id="Chapter-Extract-Go"><a href="#Chapter-Extract-Go">Extract & Go</a></h6>
Der Einsteiger erhält auf der Download-Seite ein Package mit dem Namen <strong>apf-demopack-*</strong>,
das alle relevanten Framework-Pakete und die komplette Webseite als Beispiel-Anwendung enthält.
Zur Installation muss dieses heruntergeladen und im DocumentRoot des Webservers oder einem VHOST
entpackt werden. Um das URL-Rewriting-Feature testen zu können sollte letztere Variante vorgezogen
werden. Um das URL-Rewriting zu deaktivieren, muss in der Datei
<strong>/apps/config/core/applicationmanager/INIT_demosite.ini</strong>
<gen:highlight type="apf-xml">
  APPS__URL_REWRITING = false
</gen:highlight>
gesetzt werden und die RewriteEngine des Apache Webservers mit
<gen:highlight type="apf-xml">
  RewriteEngine Off
</gen:highlight>
in der Datei <strong>/.htaccess</strong> abgeschaltet werden. Damit funktionieren Anwendungen auch
mit herkömmlichen URLs. Diese und weitere Hinweise finden sich in der Datei <strong>README.txt</strong>
des Demo-Packages. Das Paket <strong>apf-codepack-*</strong> enthält bei jedem Release
den Code des Frameworks ohne die Beispiel-Applikation und kann für Updates oder andere
Installationen genutzt werden.
<br />
<br />
<br />
<h6 id="Chapter-Konfiguration"><a href="#Chapter-Konfiguration">Konfiguration</a></h6>
Die mitgelieferten Beispiel-Applikationen müssen zunächst nicht konfiguriert werden und
sind ohne Zutun des Entwicklers lauffähig. Zum Betrieb des Demo-Gästebuch bzw. der Kommentar-
Funktion auf den Dokumentationsseiten sind die Hinweise in der Datei <strong>README.txt</strong> des
<em>apf-demopack-*</em>-Releases zu beachten.
<br />
<br />
<br />
<h5 id="Chapter-3-4-3-Erste-Schritte"><a href="#Chapter-3-4-3-Erste-Schritte">3.4.3. Erste Schritte</a></h5>
<br />
<h6 id="Chapter-Demo-Software"><a href="#Chapter-Demo-Software">Demo-Software</a></h6>
Wie bereits unter 3.4.2 erwähnt stehen alle Applikationen als Demo-Applikationen zur Verfügung
und die Details zur Implementierung werden unter
<doku:link>http://adventure-php-framework.org/Seite/KontaktFormular</doku:link> und
<doku:link>http://adventure-php-framework.org/Seite/GaesteBuch</doku:link> näher erläutert.
<br />
<br />
<br />
<h6 id="Chapter-Einfuehrung-Quickstart"><a href="#Chapter-Einfuehrung-Quickstart">Einführung / Quickstart</a></h6>
<doku:link>http://adventure-php-framework.org/Seite/HalloWelt</doku:link> kann der Einsteiger als
erstes Beispiel für die Erstellung einer Applikation nutzen. Dort wird beschrieben, welche Schritte
notwendig sind um eine einfache Applikation mit dem Framework zu erstellt. Eine erweiterte Einführung
erhält der interessierte Anwender im Kapitel Grundlagen
(<em><doku:link>http://adventure-php-framework.org/Seite/Grundlagen</doku:link></em>).
Dort erfährt der Nutzer, wie welche Programm- bzw. Konfigurationsdateien eine Applikationen
benötigt. Weiterhin steht ein HOWTO zum Erstellen einer einfachen Webseite mit Hilfe des
Frameworks unter <doku:link>http://adventure-php-framework.org/Seite/WebseiteErstellen</doku:link>
zur Verfügung. Dieses kann als Grundlage für den Betrieb der mitgelieferten Beispiel-
Applikationen sowie zur Entwicklung weiterer Module genutzt werden.
<br />
<br />
<br />
<h5 id="Chapter-3-4-4-Erstellung-einer-Webseite"><a href="#Chapter-3-4-4-Erstellung-einer-Webseite">3.4.4. Erstellung einer Webseite</a></h5>
<br />
<h6 id="Chapter-Template-Bau-Layoutgestaltung"><a href="#Chapter-Template-Bau-Layoutgestaltung">Template-Bau / Layoutgestaltung</a></h6>
Dem Thema Templates ist in der Dokumentation ein eigenes Kapitel gewidmet. Auf
<doku:link>http://adventure-php-framework.org/Seite/Templates</doku:link> werden die Grundlagen
des Template-Baus und die Möglichkeiten der Gestaltung von Templates erläutert. Die hier
vermittelte Struktur und die Funktion von Templates ist eine völlig andere, verglichen mit den
vorherigen Test-Kandidaten. Das Adventure PHP Framework verfolgt einen generischen GUI-Ansatz,
der dem Entwickler erlaubt, eine beliebig komplexe GUI-Struktur zu generieren. Wie auch im Kapitel
Klassen unter "DOM-Objektmodell der Präsentations-Schicht" geschrieben steht, wird die GUI über
einen Adventure PHP Framework-eigenes DOM abgebildet, auf das der Programmierer beliebig Einfluss
nehmen kann (<em><doku:link>http://adventure-php-framework.org/Seite/Klassen</doku:link></em>).
Das Einklinken weiterer Funktionen oder Module in die bereits vorhandene GUI wird damit stark
vereinfacht. Diese Tatsache unterstützt das komplett offene URL-Design, das keine starren
Strukturen wie
<gen:highlight type="apf-xml">
  http://www.example.com/[{Module}/]{Controller}/{Action}[/{Param1}/../{ParamN}]
</gen:highlight>
kennt, sondern frei gestaltet werden kann. Somit ist es möglich verschiedenste unabhängige
Module in einer GUI zu betreiben.
<br />
<br />
Die Test-Seite soll wie bei den bisherigen Probanden auch aus den Bereichen
<ul>
  <li>Menü</li>
  <li>Content</li>
  <li>Top-Menü</li>
  <li>News-Bereich</li>
</ul>
bestehen und die dafür bestimmten Inhalte tragen. Da Layouts im Adventure PHP Framework aus
mehreren Views bestehen können, die für sich genommen "kleine MVC-Einheiten" sind, kann
das Layout sehr einfach erstellt werden. Zunächst werden die dafür notwendigen Ordner
angelegt und ein neues Projekt erstellt:
<br />
<br />
Um das URL-Rewriting-Feature testen zu können,wurde im Ordner, in dem das Release-Package entpackt
wurde, ein neuer Ordner mit dem Namen <strong>testapp</strong> angelegt. In diesem wurde die <em>index.php</em>
und die <em>.htaccess</em> aus dem Demo-Projekt und die Struktur unter <em>/frontend</em> kopiert. Um
den neuen Ordner als DocumentRoot zu haben, musste die VHOST-Konfiguration um diese Änderung
angepasst werden. Das "Hallo Welt!"-Beispiel beschreibt nun, welche Schritte zum Anlegen einer neuen
Seite notwendig sind. Dazu muss zunächst die INIT-Datei <em>INIT_testapp.ini</em> unter
<em>/apps/config/core/applicationmanager</em> angelegt und eine Ordnerstruktur unter
<em>/apps/sites/testapp</em> (vgl. Demo-Projekt) erzeugt werden. Diese beinhaltet zunächst die
Ordner
<gen:highlight type="apf-xml">
sites/
      testapp/
              pres/
                   documentcontroller/
                   templates/
</gen:highlight>
Der Ordner <em>templates</em> ist der Ablageort für Template-Dateien und wie oben beschrieben
werden fünf Template-Dateien darin angelegt, die die einzelnen Bereiche der Seite plus ein
"Master-Layout" beinhalten. Das sind:
<ul>
  <li><strong>webseite.html</strong>: Master-Layout</li>
  <li><strong>content.html</strong>: Content-Bereich</li>
  <li><strong>topmenu.html</strong>: Bereich des oberen horizontalen Menüs</li>
  <li><strong>news.html</strong>: News-Bereich in dem ein Banner eingeblendet wird</li>
  <li><strong>menu.html</strong>: Inhalt des rechten vertikalen Menüs</li>
</ul>
Das Master-Template <em>webseite.html</em> wird mit dem HTML-Gerüst gefüllt, die übrigen
Dateien erhalten die jeweils relevanten Bereiche der Seite. Die einzelnen "Unter-Views" können
im Master-Layout nun mit dem XML-Tag <strong>&lt;core:importdesign /&gt;</strong> an den vorgesehenen
Stellen eingebunden werden. Da das Adventure PHP Framework die Dateien per Namespace adressiert - was
ein relativer Pfad zum <strong>APPS__PATH</strong> ist - müssen die Templates im Ordner
<em>/apps/sites/testapp/pres/templates</em> wie folgt in der Datei <em>webseite.html</em> adressiert
werden:
<gen:highlight type="apf-xml">
  &lt;core:importdesign namespace="sites::testapp::pres::templates" template="menu" /&gt;
</gen:highlight>
Um die Webseite nun aufrufen zu können muss die <em>index.php</em> angepasst werden:
<gen:highlight type="php">
// Pfad zum Applikations-Verzeichnis angeben
define('APPS__PATH','../apps');
define('APPS__NAME','testapp');

// ApplicationManager einbinden
require_once(APPS__PATH.'/core/applicationmanager/ApplicationManager.php');

// Front-Controller einbinden
import('core::frontcontroller','Frontcontroller');


// Front-Controller erzeugen
$fC = &Singleton::getInstance('Frontcontroller');

// Context und Sprache setzen
$fC->setContext('sites::testapp');
$fC->setLanguage('de');

// Front-Controller starten
$fC->start('sites::testapp::pres::templates','website');

// Benchmark-Report ausgeben, falls benchmarkreport=true in der URL enthalten ist
if(isset($_REQUEST['benchmarkreport'])){
   if($_REQUEST['benchmarkreport'] == 'true'){
      $T = &Singleton::getInstance('BenchmarkTimer');
      echo $T->createReport();
   }
}
</gen:highlight>
Die gewünschte Webseite ist nun mit einem leeren Inhalts-Bereich zu sehen. Für die Füllung
des Inhaltsbereiches kann nun entweder die Template-Datei <strong>content.html</strong> gefüllt
werden, oder der auf <doku:link>http://adventure-php-framework.org/Seite/TagLibTags</doku:link>
beschriebe Tag <strong>&lt;doc:createobject /&gt;</strong> verwendet werden. Dieser sucht
in einem Ordner unterhalb des DocumentRoots - standardmäßig <em>/frontend/content/</em> -
nach Content-Dateien der Form <strong>c_([a-z]{2})_([a-z0-9]{3,}).html</strong>, und ausliest deren
Inhalte aus und stellt sie dar. Im XML-Tag kann konfigurierten werden, welcher URL-Parameter verwendet
werden soll. In diesem Fall muss - um das geforderte URL-Layout einhalten zu können - der
Parameter <strong>Seite</strong> sein. Eine weitere Möglichkeit wäre es, für das
Template <em>content.html</em> einen Document-Controller zu definieren, der den Inhalt aus einer
Datenbank liest. Um die Vergleichbarkeit mit den bisherigen Bewerbern zu gewährleisten
wurde im  Template <em>content.html</em> der Quelltext
<gen:highlight type="apf-xml">
&lt;core:addtaglib
   namespace="tools::html::taglib"
   class="CreateDocumentFromFileTag"
   prefix="doc"
   name="createobject"
/&gt;
&lt;document:createcontentobject requestparam="Seite" defaultvalue="Startseite" /&gt;
</gen:highlight>
eingefügt. Der <em>&lt;core:addtaglib /&gt;</em>-Aufruf muss hier deshalb platziert
werden, damit dem Page-Controller mitgeteilt wird, dass eine weitere TagLibrary im aktuellen
<em>Document</em> verwendet wird. Ohne diese Bekanntgabe wird der Tag nicht ausgeführt. Um nun
Inhalte angezeigt zu bekommen müssen die hier verwendeten Dateien im Ordner <em>/frontend/content</em>
angelegt werden. Zum Test sind das <strong>c_de_startseite.html</strong>, <strong>c_de_benchmark.html</strong>
und <strong>c_de_klassen.html</strong>. Damit wurde die Basis der Test-Seite geschaffen und die
angelegten Seite können aufgerufen werden.
<br />
<br />
<br />
<h6 id="Chapter-Handling-von-Controllern"><a href="#Chapter-Handling-von-Controllern">Handling von Controllern</a></h6>
Controller werden - wie bereits in "Template-Bau / Layoutgestaltung" angesprochen - nicht zentral
über einen Dispatcher gemäß den URL-Parametern aufgerufen, sondern auf Anforderung
innerhalb eines DOM-Knotens und mit den Informationen der URL, bzw. der Applikation, falls erforderlich.
Die Implementierung nach dem Page-Controller- und Composite-Pattern sieht zudem vor, dass jeder
- wie es das Framework nennt - Document-Controller vom abstrakten Controller <strong>BaseDocumentController</strong>
erbt. Dieser besitzt die vom Framework zur Verfügung gestellten Möglichkeiten und unterstützt
den Anwender bei der Implementierung von Controllern.
<br />
<br />
Controller im Adventure PHP Framework werden im Template definiert. Damit kann der Entwickler selbst
entscheiden, ob er in einem Template (=DOM-Knoten) dynamische Inhalte erzeugen möchte oder nicht.
Möchte der Programmierer später dem Template einen Controller hinzugefügen, so kann dies
ohne Änderung der restlichen Applikation passieren. Die nötigen URL-Informationen kann sich
der Controller dabei aus der für ihn erweiterten URL ziehen.
<br />
<br />
Ein weiterer Unterschied zwischen den Kandidaten <em>CakePHP</em>, <em>Codeigniter</em>,
<em>Zend Framework</em> einerseits und dem Adventure PHP Framework andererseits, ist die Implementierung
des FrontControllers. Hier können - ähnlich wie die Controller für einen DOM-Knoten -
mehrere Actions in der URL platziert und ausgeführt werden. Damit ist der Anwender nicht darauf
beschränkt nur eine Applikation mit einem Controller und einer Action zu einer Zeit mit
Informationen bedienen zu können, sondern es können mehrere Applikationen, die gemeinsam in
einer GUI dargestellt werden, komplett unabhängig implementiert und ausgeführt werden. Dies
bringt den Vorteil mit sich, dass eine Gesamt-Applikation aus beliebig vielen Einzel-Applikationen
von unterschiedlichen Entwicklern und Teams zusammen "gesteckt" werden kann, solange sich diese
an die Paradigmen des Frameworks halten. Das in <em>Kapitel 4.3.4.</em>, Abschnitt <em>Erweiterbarkeit
der GUI-Komponenten</em>, diskutierte Integrationsproblem von verschiedensten Teil-Applikationen in
eine ganze ohne Auflösung von Abhängigkeiten zu einer anderen Applikation in jeder der
Teil-Applikationen - siehe auch <doku:link>http://www.zfforum.de/showthread.php?t=685</doku:link> -
ist damit auf einfache Art und Weise möglich. Die Implementierung von Actions für den
FrontController wird unter <doku:link>http://adventure-php-framework.org/Seite/Frontcontroller</doku:link>
genauer beschrieben.
<br />
<br />
<br />
<h6 id="Chapter-Erweiterbarkeit-der-GUI-Komponenten"><a href="#Chapter-Erweiterbarkeit-der-GUI-Komponenten">Erweiterbarkeit der GUI-Komponenten</a></h6>
Der Page-Controller des Adventure PHP Frameworks kennt so genannte <strong>TagLibs</strong>. Diese sind
die Definition einer bestimmten Funktionalität, die hinter einem XML-Tag steckt. Viele der oben
verwendeten XML-TagLibs sind bereits im Framework integriert und können verwendet werden. Einige
von diesem müssen vor der Verwendung dem aktuellen <em>Document</em> zunächst bekannt gemacht
werden.
<br />
<br />
Da der integrierte TagLib-Parser beliebige TagLibs erkennen kann, können diese vom Entwickler
genutzt werden, um die Funktionalitäten des Frameworks und damit die einer Applikation oder
einer Webseite erweitert werden. <doku:link>http://adventure-php-framework.org/Seite/TagLibTags</doku:link>
beschreibt die bereits vorhandenen Libraries und <doku:link>http://adventure-php-framework.org/Seite/TagLibsErstellen</doku:link>
erörtert, wie neue TagLibs erstellt werden können. Nach Meinung des Autors verfügt
das Adventure PHP Framework damit über eine sehr komfortable Möglichkeit, die
Funktionalitäten des Frameworks und die Möglichkeiten einer GUI zu erweitern.
<br />
<br />
Für die Analyse wurde die unter <doku:link>http://adventure-php-framework.org/Seite/TagLibsErstellen</doku:link>,
Kapitel <em>3.1. Taglib php_taglib_hightlight</em> beschriebene TagLib für das Highlighting
des PHP-Codes verwendet. Die Generierung des Menüs innerhalb der Dokumentationsseiten
wurde mit Hilfe der Klasse <strong>doku_taglib_navigation</strong> erzeugt. Der Quelltext der TagLib
gestaltet sich wie folgt (gekürzt):
<gen:highlight type="php">
class doku_taglib_navigation extends Document {

   public function transform(){

      // Aktuelle Seite deklarieren
      $page = RequestHandler::getValue('Seite');

      // Vorherige Seite deklarieren
      $PreviousPage = $this->__getNeighborPageName($page);

      // Nächste Seite deklarieren
      $NextPage = $this->__getNeighborPageName($page,'next');

      // Rückgabe-Puffer deklarieren
      $Buffer = (string)'';

      // Zurück-Blättern anzeigen
      $Buffer .= '<strong>&laquo;</strong>';

      if($PreviousPage != null){
         $Buffer .= '<a href="./?Seite='.$PreviousPage.'" title="Vorherige Seite">Vorherige Seite</a>';
      }
      else{
         $Buffer .= '<font style="color: gray;">Vorherige Seite</font>';
      }

      // übersicht anzeigen
      $Buffer .= ' | <a href="./?Seite=Startseite" title="Startseite">Startseite</a> | ';

      // Nächste Seite anzeigen
      if($NextPage != null){
         $Buffer .= '<a href="./?Seite='.$NextPage.'" title="Nächste Seite">Nächste Seite</a>';
      }
      else{
         $Buffer .= '<font style="color: gray;">Nächste Seite</font>';
      }

      $Buffer .= ' <strong>&raquo;</strong>';

      return $Buffer;

   }

   private function __getNeighborPageName($CurrentPage,$Type = 'previous'){
      [..]
   }

}
</gen:highlight>
Um die TagLibrary in einem beliebigen Template einsetzen zu können muss diese zu Beginn mit
<gen:highlight type="apf-xml">
&lt;core:addtaglib
   namespace="sites::testapp::pres::taglib"
   class="doku_taglib_navigation"
   prefix="doku"
   name="navigation"
/&gt;
</gen:highlight>
eingebunden werden und kann anschließend mit
<gen:highlight type="apf-xml">
  &lt;doku:navigation /&gt;
</gen:highlight>
verwendet werden.
<br />
<br />
<br />
<h6 id="Chapter-Komplexe-Layouts"><a href="#Chapter-Komplexe-Layouts">Komplexe Layouts</a></h6>
Da die Komplexität des DOM-Objekt-Baums der Präsentationsschicht des Adventure PHP Frameworks
nicht beschränkt ist und die Funktionalität an beliebiger Stelle durch den Einsatz von
Document-Controllern, bzw. global betrachtet, von FrontController-Actions erweitert werden kann, ist
es ohne Weiteres auf einfache Weise möglich, komplexe Projekte zu realisieren. Insbesondere das
Entwickeln von Modulen fällt hier leicht, da diese einfach per XML-Tag konfiguriert dort
eingebunden werden können, wo sie benötigt werden. Am Beispiel des mitgelieferten
Gästebuchs wird das wie folgt vorgenommen:
<gen:highlight type="apf-xml">
  &lt;core:importdesign
    namespace="modules::guestbook::pres::templates"
    template="guestbook"
    guestbookid="{ID}"
  /&gt;
</gen:highlight>
Dabei konfiguriert der Parameter <strong>guestbookid</strong> die ID des an dieser Stelle auszugebenden
Gästebuchs. Vorteil dieses Verfahrens ist auch, dass eine Applikation - wie hier ein Gästebuch -
komplett unabhängig von der restlichen Webseite entwickelt und später eingebunden werden kann.
<br />
<br />
<br />
<h6 id="Chapter-FormularDesign"><a href="#Chapter-FormularDesign">FormularDesign</a></h6>
Im Adventure PHP Framework ist ein Formular konsequenter Weise "auch nur" eine TagLib, die die Funktion
erweitert. Dazu findet der Entwickler im Ordner <strong>/apps/tools/form/taglib</strong> verschiedene
TagLibraries für jedes Formular-Element.<br />
Jedes Formular wird durch Hinzufügen der Formular-TagLib plus der Definition des Formulars in
XML-Tags innerhalb eines Templates erzeugt. Im Gegensatz zu den bisherigen Frameworks muss der
HTML-/XML-Quellcode eines Formulars zwar von Hand geschrieben werden, jedoch können Funktionen
wie Formular-Validierung durch Definition dokumentierter Attribute aktiviert werden und es muss dazu
kein separater PHP-Code verfasst werden.<br />
Auch in diesem Test soll ein Kontakt-Formular nach den Vorgaben der Bewertungs-Kriterien erstellt
werden. Dazu ist im vorliegenden Framework zunächst notwendig, dass ein neues Template und ein
Controller angelegt wird um das im Template definierte Formular auch darstellen zu können. Das
Template mit dem Namen <strong>kontakt.html</strong> wird im Ordner <strong>/apps/sites/testapp/pres/templates</strong>
abgelegt und beinhaltet folgenden Quellcode:
<gen:highlight type="apf-xml">
&lt;@controller
   namespace="sites::testapp::pres::documentcontroller"
   class="kontakt_controller"
@&gt;
  &lt;core:addtaglib
     namespace="tools::form::taglib"
     class="HtmlFormTag"
     prefix="html"
     name="form"
  /&gt;
  &lt;h1&gt;Kontaktformular&lt;/h1&gt;
  Wenn Sie mit mir in Kontakt treten möchten, dann benutzen Sie einfach dieses Formular. Geben Sie
  Ihre Nachricht ein und schon kann es los gehen. Ich werden mich dann umgehend mit Ihnen in Verbindung
  setzten. Bitte füllen Sie das Formular vollständig aus!
  &lt;html:placeholder name="Content" /&gt;
  &lt;html:form name="Formular" method="post" action=""&gt;
    &lt;span style="width: 47px; border: 0px solid black; margin-right: 24px;"&gt;Person&nbsp;/&nbsp;Gruppe:&lt;/span&gt;
    &lt;form:select name="Person" class="eingabe_feld"&gt;
      &lt;select:option value="1"&gt;Max Müller&lt;/select:option&gt;
      &lt;select:option value="2"&gt;Brigitte Hansen&lt;/select:option&gt;
    &lt;/form:select&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;span style="margin-right: 82px;"&gt;Name:&lt;/span&gt;&lt;form:text name="Name" class="eingabe_feld"
      style="width: 280px;" /&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;span style="margin-right: 37px;"&gt;eMail-Adresse:&lt;/span&gt;&lt;form:text name="EMail" class="eingabe_feld"
      style="width: 280px;" /&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;span style="margin-right: 81px;"&gt;Betreff:&lt;/span&gt;&lt;form:text name="Subject" class="eingabe_feld"
      style="width: 280px;" /&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    Kommentar:
    &lt;br /&gt;
    &lt;form:text name="Text" class="eingabe_feld" style="height: 200px; width: 400px; overflow: auto;"
      id="Comment" /&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;form:button name="Abschicken" value="Abschicken" class="eingabe_feld" /&gt;
  &lt;/html:form&gt;
</gen:highlight>
Im Controller muss nun - so geht es aus dem Beispiel aus
<doku:link>http://adventure-php-framework.org/Seite/KontaktFormular</doku:link> hervor -
das Formular transformiert und in einen Platzhalter eingesetzt werden. Dies passiert durch
<gen:highlight type="php">
class ContactController extends BaseDocumentController {

   public function transformContent(){
      $Form = &$this->getForm('Formular');
      $this->setPlaceHolder('Content',$Form->transformForm());
   }

}
</gen:highlight>
in der Controller-Klasse <strong>kontakt_controller</strong> in der Datei
<strong>/apps/sites/testapp/pres/documentcontroller/kontakt_controller.php</strong>. Damit ist das
Formular bereits voll funktionsfähig. Features wir Validierung und Presetting werden bereits
out-of-the-box unterstützt und können per XML-Tag-Attributen konfiguriert werden.
<br />
Um das Formular abschicken zu können muss noch eine weitere Prüfung in den Controller eingebaut
werden. Um abzufragen, ob ein Formular abgesendet, bzw. korrekt ausgefüllt wurde hat das
Formular-Objekt zwei private Attribute, die mit <em>get()</em> ausgelesen und verarbeitet werden
können. Gemäß Beispiel muss der Controller damit wie folgt erweitert werden:
<gen:highlight type="php">
class ContactController extends BaseDocumentController {

   public function transformContent(){

      $Form = &$this->getForm('Formular');

      if($Form->get('isSent') == true && $Form->get('isValid') == true){
         header('Location: /Seite/Danke');
      }

      $this->setPlaceHolder('Content',$Form->transformForm());
   }

}
</gen:highlight>
Innerhalb des if-Anweisungs-Blocks kann dann noch die Logik des E-Mail-Versandes ergänzt werden,
was hier nicht Teil der Prüfung war bzw. ist. Beim Versand des Formulars können die Werte
der Formular-Felder mit der Komponente <strong>RequestHandler</strong> ausgelesen werden. Dies
kann wie folgt passieren:
<gen:highlight type="php">
import('tools::request', 'RequestHandler');

class ContactController extends BaseDocumentController {

  public function transformContent(){

      $Form = &$this->getForm('Formular');

      if($Form->get('isSent') == true && $Form->get('isValid') == true){

         $Name = RequestHandler::getValue('Name');
         $Comment = RequestHandler::getValue('Comment');
         [..]

      }

  }

}
</gen:highlight>
Um das Formular in die Seite einzubinden wurde unter <strong>/frontend/content</strong> eine neue
Datei mit dem Namen <strong>c_de_kontakt.html</strong> angelegt und mit der XML-Anweisung
<gen:highlight type="apf-xml">
  &lt;core:importdesign namespace="sites::testapp::pres::templates" template="kontakt" /&gt;
</gen:highlight>
gefüllt. Bei Aufruf der URL
<gen:highlight type="apf-xml">
  http://adventuretest.de/Seite/Kontakt
</gen:highlight>
wird nun das Formular angezeigt. Legt man eine weitere Seite mit den Namen <strong>c_de_danke.html</strong>
an, so wird auch eine Danke-Meldung angezeigt.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-4-5-URL-Handling"><a href="#Chapter-3-4-5-URL-Handling">3.4.5. URL-Handling</a></h5>
<br />
<h6 id="Chapter-Unterstuetzung-von-URL-Rewriting"><a href="#Chapter-Unterstuetzung-von-URL-Rewriting">Unterstützung von URL-Rewriting</a></h6>
URL-Rewritung wird auch beim Adventure PHP Framework nativ unterstützt. Wie im Einstiegskapitel
angemerkt ist es jedoch ebenso möglich URL-Rewriting zu deaktivieren, da alle Anwendungen auch
ohne URL-Rewriting lauffähig sind, solange die dynamisch generierten Links mit dem
<em>LinkHandler</em> oder dem <em>FrontcontrollerLinkHandler</em> im FrontController-Betrieb generiert
werden. Um die Applikationen im URL-Rewriting-Modul ausliefern zu können bringt das
Adventure PHP Framework eine in der .htaccess-Datei befindliche RewriteRule der Form
<gen:highlight type="apf-xml">
  RewriteEngine on
  RewriteCond %{REQUEST_URI} !^(\/frontend) [NC]
  RewriteRule !(php|css|jpe?g|png|gif|zip|rar)$ \
  /index.php?query=%{REQUEST_URI}&%{QUERY_STRING} [NC,L]
</gen:highlight>
mit. Um das Feature nutzen zu können muss in der Apache-Konfiguration ein
<gen:highlight type="apf-xml">
  AllowOverride All
</gen:highlight>
für den aktuellen VHOST aktiviert, sein. Dies gilt insbesondere auch für die bisherigen
Test-Kandidaten.
<br />
<br />
<br />
<h6 id="Chapter-Generik-des-URL-Layouts"><a href="#Chapter-Generik-des-URL-Layouts">Generik des URL-Layouts</a></h6>
Wie bereits in den vorherigen Kapiteln vorweg gegriffen, ist das URL-Layout des Adventure PHP Frameworks
an keine starren Regeln gebunden, sondern kann beliebig gestaltet werden. Im FrontController-Modus
werden dabei unterschiedliche Bereiche, in denen "normale" Parameter und FrontController-Actions
untergebracht werden durch das Zeichen "/~/" getrennt, vom <em>frontcontrollerRewriteRequestFilter</em>
im URL-RewriteModus oder vom <em>frontcontrollerRequestFilter</em> entsprechend ausgewertet und im
<strong>$_REQUEST</strong>-Array zur Verfügung gestellt. Im Page-Controller-Betrieb übernimmt
die Rewriting-Aufgaben der <em>pagecontrollerRewriteRequestFilter</em> bzw. der <em>standardRequestFilter</em>
im Fall von deaktiviertem URL-Rewriting.<br />
Ein weiteres Feature des URL-Handlings ist die Filter-Funktion, die alle HTML- und Tag-Zeichen codiert
um XSS-Angriffe zu vermeiden. Zudem werden alle Sonderzeichen in den Request-Werten mit Slashes versehen,
so dass diese - beispielsweise in Formular-Feldern - keine Zerstückelung der Inhalte erzeugen.
Für die Verwendung der Daten beispielsweise in Suchen müssen diese dann vom Programm wieder
decodiert werden.
<br />
<br />
<br />
<h6 id="Chapter-URL-Manipulations-Tools-Linkgenerierung"><a href="#Chapter-URL-Manipulations-Tools-Linkgenerierung">URL-Manipulations-Tools / Linkgenerierung</a></h6>
Der Entwickler wird beim Adventure PHP Framework angehalten, die bereits mehrfach genannten Komponenten
<strong>LinkHandler</strong> und <strong>FrontcontrollerLinkHandler</strong> einzusetzen, wenn
es um Manipulation von URLs geht. Der <em>FrontcontrollerLinkHandler</em> sollte dann eingesetzt werden,
wenn die Applikation mit dem FrontController ausgeführt wird, da dieser FrontController-Actions
in der URL beachtet. Grundsätzlich spricht jedoch nichts dagegen, immer den
<em>FrontcontrollerLinkHandler</em> zu verwenden, da dieser "einfache" URLs ebenso beherrscht wie
FrontController-URLs.<br />
Innerhalb der Evaluation wurden diese Komponenten wie folgt getestet:
<gen:highlight type="php">
   import('tools::link','FrontcontrollerLinkHandler');

   $url = 'http://www.example.com:8180/Seite/Kontakt/perspektive/print';
   $params = array(
                   'perspektive' => '',
                   'Seite' => 'Danke',
                   'TestParam' => 'TestParamValue'
                   );
   echo FrontcontrollerLinkHandler::generateLink($url,$params);
</gen:highlight>
<strong>Ausgabe:</strong>
<gen:highlight type="apf-xml">
  http://www.example.com:8180/Seite/Danke/TestParam/TestParamValue
</gen:highlight>
Es können sowohl bestehende Parameter geändert, als auch bestehende gelöscht oder neue
hinzugefügt werden. Ähnlich verhält sich der <em>FrontcontrollerLinkHandler</em>, wenn
FrontController-Actions im Spiel sind. Diese werden wie "normale" Parameter in die URL eingefügt.
Geprüft wurde hier zudem, dass Ampersands in Links automatisch codiert werden.
<br />
<br />
<br />
<h5 id="Chapter-3-4-6-Design-des-Frameworks"><a href="#Chapter-3-4-6-Design-des-Frameworks">3.4.6. Design des Frameworks</a></h5>
<br />
<h6 id="Chapter-Umfang-der-mitgelieferten-Komponenten"><a href="#Chapter-Umfang-der-mitgelieferten-Komponenten">Umfang der mitgelieferten Komponenten</a></h6>
Das Release-Package des aktuellen Test-Kandidaten umfasst im Vergleich zu den bisherigen Frameworks
etwas weniger Module, was auch an der Strukturierung dieser gelegen sein kann. Das Adventure PHP Framework
liefert im aktuellen Release
<ul>
  <li>die Grundkomponenten des Frameworks,</li>
  <li>eine Demo-Seite mit vielen Beispielen</li>
  <li>fertige Module wie Pager, Gästebuch, Kontaktformular und</li>
  <li>eine Reihe von Tools</li>
</ul>
zur Unterstützung der Arbeit mit. Was das Thema Module angeht, so sind im Adventure PHP Framework
mehr fertige Applikationen (Module) enthalten als in den bisherigen Probanden. Die genannten Module
sind dabei schon recht mächtige Applikationen, wie unter
<doku:link>http://adventure-php-framework.org/Seite/Module</doku:link> beschrieben ist. Der Pager
ist dabei ein sehr treffendes Beispiel für eine Business-Komponente, die die komplette Aufgabe
des Pagings von Datenbank-Ergebnissen übernehmen kann.
<br />
<br />
Besonders zu erwähnen ist die Benchmark-Komponente, da diese bereits sehr tief im Code verwoben
ist und ohne Zutun des Programmierers zu allen wichtigen Teilen der Software Benchmarks erstellen
kann. Eine weitere herausragende Komponente ist die Implementierung des Page-Controllers, die ein
sehr generisches Design der GUI-Komponenten der Applikation zulässt. Erwähnenswert sind
in diesem Zusammenhang die mitgelieferten TagLibs. Diese bilden bereits 75% der Anwendungsfälle
ab und können out-of-the-box konfiguriert und eingesetzt werden. Weitere Beschreibungen finden
sich unter <int:link pageid="119"/>, bzw. in den entsprechenden Kapiteln der Dokumentation.
<br />
<br />
<br />
<h6 id="Chapter-Einsatz-von-Design-Pattern"><a href="#Chapter-Einsatz-von-Design-Pattern">Einsatz von Design-Pattern</a></h6>
Design-Pattern spielen auch beim Adventure PHP Framework eine herausragende Rolle. Nicht nur, dass
das Framework nach anerkannten Design-Pattern entwickelt wurde (siehe hierzu
<doku:link>http://adventure-php-framework.org/Seite/Grundlagen</doku:link>), sondern es bietet
auch die Grundlagen und Tools um nach oft verwendeten Design-Pattern (vgl. MVC) entwickeln zu können.
Unter Hilfsmittel fallen dabei eine "abstract singleton"-Implementierung, die Anwendung des
Fabric-Entwurfsmusters und Weiterer. Da das Framework keine native PHP 5 Version bietet, sind Konstrukte
wie Interfaces oder abstrakte Klassen nicht im Quellcode enthalten, jedoch durch das Klassendesign
fest verwoben.
<br />
<br />
<br />
<h6 id="Chapter-Struktur-des-Quellcodes-Design-der-Klassen"><a href="#Chapter-Struktur-des-Quellcodes-Design-der-Klassen">Struktur des Quellcodes / Design der Klassen</a></h6>
Die im Framework enthaltenen Klassen erben alle von einer gemeinsamen Basis-Klasse, die die
grundlegenden Interface-Methoden und -Attribute bereits mitbringt. So kann der Entwickler immer davon
ausgehen, dass ein von <strong>APFObject</strong> erbendes Objekt eine abstrakte <em>get()</em>- und
<em>set()</em>-Methode hat, um private Attribute manipulieren zu können. Des weiteren führt
die Klasse <em>APFObject</em> das Namespace-Handling und das initialisieren einer Klasse ein, das
in Applikationen häufig für Business- und Daten-Schicht-Komponenten zum Einsatz kommt.
<br />
<br />
Inkonzequenz kann den Entwicklern im Bereich der Klassenbenennung vorgeworfen werden, da hier eine
Mixtur aus CamelCase- bzw. "Alles klein"-Schreibweise je nach Bestimmung der Klasse propagiert wird.
<br />
<br />
Die Struktur des Quellcodes ist per-se ist mit gut zu bewerten, da für jedes Package eine Struktur
im Ordner-Baum angelegt wurde, bzw. der Quell-Code der mitgelieferten Komponenten sehr gradlinig und
konsequent aufgebaut ist, was den Blick in den Quellcode - falls notwendig - erleichtert.
<br />
<br />
<br />
<h6 id="Chapter-Einsetzbarkeit-fuer-mehrere-Applikationen"><a href="#Chapter-Einsetzbarkeit-fuer-mehrere-Applikationen">Einsetzbarkeit für mehrere Applikationen</a></h6>
Das Adventure PHP Framework bringt mit der Namespace- und Context-Behandlung ein sehr mächtiges
Werkzeug mit um Applikationen, die den Design-Richtlinien des Frameworks genügen, in vielen
verschiedenen Applikationen und Umfeldern einsetzen zu können. Die Konfigurations-Direktive
<em>APPS__ENVIRONMENT</em> bestimmt bereits in der Basis-Konfigurationsdatei in welchem Umfeld die
Applikation ausgeführt wird. Um eine Applikation leichter auf ein anderes System portieren zu
können, ist es dabei lediglich notwendig dafür einen Satz von Konfigurationsdateien anzulegen
und die Direktive auf einen anderen Wert zu setzen.<br />
Des Weiteren erhält jede Applikation einen Namespace (=Ablage-Ort der Programm- oder Modul-Dateien)
und einen Kontext, der über die Applikation (=Webseite) gesteuert wird. Diese drei
Unterscheidungsmerkmale helfen dem Entwickler universell wiederverwendbare Applikationen und Module
zu verfassen. Etwas gewöhnungsbedürftig ist dabei jedoch die Benennung der
Konfigurationsdateien, da diese sowohl unter dem richtigen Namespace und der richtigen Kontext-Struktur
abgelegt und mit dem für das Umfeld richtigen Dateinamen benannt sein müssen. Eine Beschreibung
hierzu liefert <doku:link>http://adventure-php-framework.org/Seite/Konfiguration</doku:link>. Die
Fehler-Meldungen des <em>ConfigurationManager</em>'s sind dabei jedoch sehr ausführlich abgefasst
und bieten Hinweise auf das Problem.
<br />
<br />
<br />
<h6 id="Chapter-Erweiterbarkeit"><a href="#Chapter-Erweiterbarkeit">Erweiterbarkeit</a></h6>
Interessierte Programmierer können das Framework beliebig erweitern, da eine sehr generische
Grund-Struktur vorhanden ist. Besonders im GUI-Bereich ist es möglich beliebige Erweiterungen
zu implementieren um die Ausgabe eines Projektes nach dem Geschmack des jeweiligen Entwicklers zu
gestalten. Aber nicht nur in der Präsentationsschicht, auch in den übrigen Bereichen ist
es mit dem Design des Adventure PHP Frameworks ohne Probleme möglich Erweiterungen zu verfassen.
<br />
<br />
<br />
<h6 id="Chapter-Scaffolding"><a href="#Chapter-Scaffolding">Scaffolding</a></h6>
Ein Rapid Development Feature im Sinne von CakePHP und CodeIgniter ist nicht enthalten und laut Roadmap
bis jetzt nicht vorgesehen. Für den Zugriff auf Datenbanken ist zwar eine generische Komponente
(leider nur für MySQL) vorhanden, Pattern wie Table-Data-Gateway oder Row-Data-Gateway sind nicht
implementiert. Aus Sicht des Autors ist dieses - wie auch beim Zend Framework - nicht Teil der
aktuellen Strategie. Diese Komponenten können bei Bedarf jedoch einfach als Module hinzugefügt
werden.
<br />
<br />
<br />
<h5 id="Chapter-3-4-7-Dokumentation"><a href="#Chapter-3-4-7-Dokumentation">3.4.7. Dokumentation</a></h5>
<br />
<h6 id="Chapter-Dokumentation-des-Quellcodes"><a href="#Chapter-Dokumentation-des-Quellcodes">Dokumentation des Quellcodes</a></h6>
Der Quellcode des Frameworks ist sehr gut dokumentiert. Einziger Nachteil ist, dass die Dokumentation
nur in deutscher Sprache vorhanden ist.
<br />
<br />
<br />
<h6 id="Chapter-API-Dokumentation"><a href="#Chapter-API-Dokumentation">API-Dokumentation</a></h6>
Die API-Dokumentation des Frameworks ist jeweils abhängig von der Version unter
<doku:link>http://adventure-php-framework.org/Seite/Downloads</doku:link> verfügbar.
<br />
<br />
<br />
<h6 id="Chapter-Einfuehrungen,-Tutorials-und-Anwendungs-Beispiele">Einführungen, Tutorials und Anwendungs-Beispiele</h6>
Leider verfügt das Adventure PHP Framework nicht über ein Wiki in das verschiedene
Entwickler ihre Erfahrungen und Code-Snippets posten können. Die übrigen Anwendungsbeispiele
verraten jedoch sehr viel über die Verwendung und die Anwendung des Frameworks. Einsteiger erhalten
mit dem Webseiten-Tutorial unter <doku:link>http://adventure-php-framework.org/Seite/WebseiteErstellen</doku:link>
einen einfachen Einstieg in den Webseitenbau. Angenehm fällt auf, dass die Anwendungsbeispiele
immer einen Bezug zur Praxis aufweisen.
<br />
<br />
<br />
<h6 id="Chapter-ChangeLogs-Migrations-Hinweise-fuer-API-Aenderungen"><a href="#Chapter-ChangeLogs-Migrations-Hinweise-fuer-API-Aenderungen">ChangeLogs / Migrations-Hinweise für API-<h6>ChangeLogs / Migrations-Hinweise für API-Änderungen</h6>Auml;nderungen</a></h6>
Ein einfaches ChangeLog ist in den Release-Notes eingearbeitet, ein erweitertes gibt es unter
<doku:link>http://adventure-php-framework.org/Seite/ChangeLog</doku:link>.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-4-8-Support"><a href="#Chapter-3-4-8-Support">3.4.8. Support</a></h5>
Da das Adventure PHP Framework nicht den kommerziellen Hintergund wie die bisherien Test-Kandidaten
aufweist, ist der Support nicht so "exzellent" aufgestellt und es ist kein "Enterprise-Bezahl-Support"
möglich. Hinter dem Framework steckt ein OpenSource-Projekt ohne hauptamtliche Entwickler. Support
erhält der Anwender daher nur auf der Seite selbst, durch das Manual und die API-Dokumentation,
per Kontakt-Formular und im PHPFriend.de-Forum unter <doku:link>http://www.phpfriend.de/forum</doku:link>.
Charmant ist es jedoch, dass man mit Hilfe des Kontakt-Formulars und einem Post im Forum direkten
Zugriff auf die Entwicklung hat. Zum aktuellen Zeitpunkt ist zudem noch kein WIKI verfügbar, in
dem Benutzer Tipps und Tricks oder Ihre Erfahrungen veröffentlichen können. Alternativ dazu
befindet sich am Ende jeder Dokumentationsseiten eine Kommentarfunktion, die als solches Instrument
genutzt werden kann.
<br />
<br />
<br />
<br />
<h5 id="Chapter-3-4-9-Benchmark"><a href="#Chapter-3-4-9-Benchmark">3.4.9. Benchmark</a></h5>
Das Benchmark-Ergebnis ist im Vergleich zu den übrigen Test-Kandidaten hervorragend gut.
Während der bisherige Favorit CakePHP die Benchmark-Seite in <strong>0.1134 s</strong> gerendert
hat benötigt das Adventure PHP Framework trotz komplexerer GUI-Engine nur etwas mehr als ein Drittel
und kommt auf eine durchschnittliche Zeit von <strong>0.0428 s</strong>. Zur Messung wurde auch
hier der im Framework integrierte <strong>BenchmarkTimer</strong> verwendet und die Benachmark-Seite
mit
<gen:highlight type="apf-xml">
http://adventuretest.de/Seite/Benchmark/benchmarkreport/true
</gen:highlight>
aufgerufen.
<br />
<br />
<br />
&raquo; Weiter auf <int:link pageid="055" title="PHP-Frameworks im Test (7)">Seite 7</int:link> (Zusammenfassung).
<br />
<br />
<br />
<core:importdesign namespace="APF\modules\comments\pres\templates" template="comment" categorykey="de_054" />