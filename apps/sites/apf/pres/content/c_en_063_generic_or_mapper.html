<doku:title parent="119" tags="object,relational,mapping,or,mapper,generic,relations,objects,object tree,object structures,configuration,usage" title="Generic OR mapper" urlname="Generic-OR-mapper">
  The genericormapper module provides a generic data mapper, that is fully integrated into the APF.
  It enables the developer to dynamically handle objects and their reations, that are defined within
  configuration files.
</doku:title>
<h3 id="Chapter-1-Introduction"><a href="#Chapter-1-Introduction">1. Introduction</a></h3>
Designing object oriented applications, you typically claim, that the complete design can be created
on OO style - without break of media. In order to achieve this goal, each developer was yet faced
with the problem of data storage in relation databases. If there is no tool, a <em>DataMapper</em>
has to be implemented newly for each application. This does not only result in higher costs and lack
of time, but is also not compatible with the <strong>DRY</strong> (<em>don't repeat yourself</em>)
paradigma. You still are forced to produce redundant code.
<br />
<br />
The APF module <strong>genericormapper</strong> now provides an abstraction layer, that is intended
to do most of the work a data mapper has to do. The functionality thereby can
<ul>
  <li>manage objects,</li>
  <li>manage relations between objects (compositions and assoziations) and</li>
  <li>features CRUD functionality for objects and object structures (aka. trees).</li>
</ul>
For this tasks, the API features a couple of methods, that support loading, manipulation and deletion
of objects within the database. The generic domain object (<strong>GenericDomainObject</strong>)
returned by the API functions can on the one hand be used directly within your applications or your
application features a simple data layer, that mapps the data mapper domain objects into your
application's domain objects and vice versa.
<br />
<br />
The following chapters show how the OR mapper has to be configured and how you can use it. The
module <strong>usermanagement</strong> shipped with the APF release is completely based on the
GenericORMapper and thus can be used as an extended implementation example. Details on the module
can be seen on the <int:link pageid="095" /> page.
<br />
<br />
<br />
<h3 id="Chapter-2-Configuration"><a href="#Chapter-2-Configuration">2. Configuration of the OR mapper</a></h3>
<br />
<h4 id="Chapter-2-1-Basics"><a href="#Chapter-2-1-Basics">2.1. Basics</a></h4>
To be able to user the OR mapper, two configuration files must be present:
<ul>
  <li>{ENVIRONMENT}_{NAMEAFFIX}_objects.ini</li>
  <li>{ENVIRONMENT}_{NAMEAFFIX}_relations.ini</li>
</ul>
The first file defines the objects and attributes, the second one is intended to define the relations
between the objects from the first file. Due to the fact, that the <strong>GenericORRelationMapper</strong>
uses the <int:link pageid="031"/> for database access, a database connection configuration must
be created if not done yet.
<br />
<br />
The <strong>{ENVIRONMENT}</strong> part of the configuration file names is taken from the registry
directive <strong>Environment</strong> from the <strong>apf::core</strong> namespace. The
<strong>{NAMEAFFIX}</strong> can be defined freely by the developer. This part of the name is inteded
to provide the possibility of different mapper configurations for one context and one environment.
This enables you to create applications, that are able to use multiple data sources.
<br />
<br />
<br />
<h4 id="Chapter-2-2-Configuration-examples"><a href="#Chapter-2-2-Configuration-examples">2.2. Configuration examples</a></h4>
Imagine, that a developer wants to create a guestbook. The source code files are located in the
<strong>modules::myguestbook</strong> namespace and the guestbook's data layer should us the OR mapper.
Further, the registry value <strong>Environment</strong> is not touched (so it is still the default
value) and the current application context is <strong>sites::mysite</strong>. Moreover, he decides,
that the name affix should be identical to <strong>guestbook</strong>. In this case, the object
configuration file must be named
<gen:highlight type="code">DEFAULT_guestbook_objects.ini</gen:highlight>
and the relation configuration file
<gen:highlight type="code">DEFAULT_guestbook_relations.ini</gen:highlight>
These must reside within the folder
<gen:highlight type="code">/apps/config/modules/myguestbook/sites/mysite</gen:highlight>
Further details on configuration, namespaces and contexts can be taken from the
<int:link pageid="134" anchor="Chapter-2-1-Konfigurations-Schema">configuration scheme definition</int:link>.
<br />
<br />
<br />
<h4 id="Chapter-2-3-Object-and-relation-definition"><a href="#Chapter-2-3-Object-and-relation-definition">2.3. Object and relation definition</a></h4>
The way of object and relation definition is described in the next two chapters:
<br />
<br />
<h5 id="Chapter-2-3-1-Object-definition"><a href="#Chapter-2-3-1-Object-definition">2.3.1. Object definition</a></h5>
The <strong>GenericORRelationMapper</strong> provides a generic domain object (<strong>GenericDomainObject</strong>)
that represents a persistence object. The type of the concrete object is classified by the domain
object's <strong>ObjectName</strong> property.
<br />
<br />
The object definition thus contains the name of the object (=name of the section) and the attributes
(=properties of the <strong>GenericDomainObject</strong> class). The following codebox shows a
typical object configuration:
<gen:highlight type="ini">
[Application]
DisplayName = "VARCHAR(100)"

[User]
DisplayName = "VARCHAR(100)"
FirstName = "VARCHAR(100)"
LastName = "VARCHAR(100)"
EMail = "VARCHAR(100)"
Username = "VARCHAR(100)"
Password = "VARCHAR(100)"

[Group]
DisplayName = "VARCHAR(100)"

[Role]
DisplayName = "VARCHAR(100)"
</gen:highlight>
The values of the attributes represent the database data types of the object's properties. The
mapper knows the following values and translates them into the right create table statements:
<ul>
  <li>VARCHAR(<strong>{LENGTH}</strong>)</li>
  <li>TEXT</li>
  <li>DATE</li>
</ul>
The <strong>{LENGTH}</strong> place holder must be replaced by any number. All other values are
directly used for the data type of a property. These must be valid data type definitions. Otherwise,
the <em>CREATE TABLE</em> statements will fail. The values presented above should be suitable for
most application cases.
<div class="hint">
   Since release 1.11, the generic or mapper supports bit masking. For this reason, the value of the
   property definition must contain a valid BIT field definition like
   <gen:highlight type="sql">bit(7) NOT NULL default b'0'</gen:highlight>
   Therby, it is not relevant, if the property is defined with a default value. But it is important
   that the declaration of the BIT field ocntains the keyword &quot;BIT&quot;. Details can be taken
   from the forum discussion under
   <a class="forum" href="http://forum.adventure-php-framework.org/de/viewtopic.php?f=8&amp;t=234" title="Fehler mit BIT-Feldern" linkrewrite="false">Fehler mit BIT-Feldern</a>
   (German).
</div>
The attributes of a domain object can then be addressed as follows:
<gen:highlight type="php">
...
$User = new GenericDomainObject('User');
$User->setProperty('FirstName','Christian');
$User->setProperty('LastName','Achatz');
...
echo 'Surename: '.$User->getProperty('FirstName');
echo 'Name: '.$User->getProperty('LastName');
...
</gen:highlight>
<br />
<h5 id="Chapter-2-3-2-Relation-definition"><a href="#Chapter-2-3-2-Relation-definition">2.3.2. Relation definition</a></h5>
The file <strong>*_relations.ini</strong> defines the relations between the objects defined in the
previous chapter. The mapper knows two types of relations: compositions and associations. Due to the
fact, that compositions are strong relations, objects, that compose other objects, cannot be deleted
due to data consistency. This case is checked by the mapper and it throws an error, if a object
is tried to be deleted, that must not.
<br />
<br />
<strong>Note:</strong>
The persistancy theory contains the rule, that each object should be composed exactly one time. This
is because an object cannot have more than one strong binding to another object in real life, too.
Futhermore, a composition relation defines the object's right to exist. Hence, be aware that your
objects are composed concerning this rule. For example, a guestbook entry cannot exist without the
guestbook object. Instead, a user can exist without the guestbook. This means, that the relation
between a guestbook and an entry must be a composition, the relation of the entry to the user must
be an association.
<br />
<br />
The following codebox shows a typical relation configuration:
<gen:highlight type="ini">
[Application2Group]
Type = "COMPOSITION"
SourceObject = "Application"
TargetObject = "Group"

[Group2User]
Type = "ASSOCIATION"
SourceObject = "Group"
TargetObject = "User"

[Role2User]
Type = "ASSOCIATION"
SourceObject = "Role"
TargetObject = "User"

[Application2User]
Type = "COMPOSITION"
SourceObject = "Application"
TargetObject = "User"

[Application2Role]
Type = "COMPOSITION"
SourceObject = "Application"
TargetObject = "Role"
</gen:highlight>
The section name (e.g. <strong>Group2User</strong>) should be named self-explanatory, because this
relation key can be used to load objects, that are related to others and to create a relation between
two or more objects. The type attribute contains the quality of relation, the
<strong>SourceObject</strong> and <strong>TargetObject</strong> params reference the relevant object
definition sections of the object definition file.
<br />
<br />
<strong>Note:</strong>
<ul>
  <li>
    The count of the relation definitions is not limited, each definition should be created to fit
    the requirements of the data model of the application. The rule of thumb here says, that when
    using one attribute more than one time in different objects, it should be outsourced to an
    independent object and referenced (associated) by the relevant objects. A typical example is the
    language.
  </li>
  <li>
    If you have created an object tree using the method <strong>addRelatedObject()</strong>, you can
    read the related objects of the desired node (<strong>GenericDomainObject</strong>) within the
    tree using <strong>getRelatedObjects()</strong> for futher manipulation or processing.
  </li>
</ul>

<h4 id="Chapter-2-4-Additional-indices"><a href="#Chapter-2-4-Additional-indices">2.4. Additional indices</a></h4>
<p>
   Since version 1.12 it is possible to define additional indices along with the objct definition.
   This may be necessary due to performance reasons and it is strongly recommended to use this
   feature, if you are heavily requesting data using index restriction.
</p>
<p>
   In such cases an object definition can be added the <em>AddIndices</em> key. The information
   provided there is used during setup and update to create additional indices to speed up the
   query execution time.
</p>
<p>
   The subsequent code box describes a simple example with three types of indices defined within
   a user's object definition:
</p>
<gen:highlight type="ini">
[User]
...
FirstName = "VARCHAR(100)"
LastName = "VARCHAR(100)"
Username = "VARCHAR(100)"
Password = "VARCHAR(100)"
...
AddIndices = "FirstName,LastName(INDEX)|Username(UNIQUE)|Password(INDEX)"
</gen:highlight>
<p>
   The additional index definition underlies the following scheme:
</p>
<ul>
   <li>
      Each additional index is defined by the included properties and the index type. Multiple
      definitions are separated by &quot;<em>|</em>&quot; (Pipe).
   </li>
   <li>
      Valid index types are: <em>INDEX</em> (normal index), <em>UNIQUE</em> (property may only
      contain a unique value), And <em>FULLTEXT</em> (search index, that can be searched using a
      <em>MATCH AGAINST()</em> statement). All index types are noted in brackets.
   </li>
   <li>
      In case multiple properties should be included in one index definition, the properties must
      be separated by colon (&quot;<em>,</em>&quot;). The names of the properties must be equal to
      the names used for the usual object definition.
   </li>
</ul>
<div class="hint">
   Details on the discussion of this feature can be taken from the wiki page
   <a class="wiki" href="http://wiki.adventure-php-framework.org/de/Zus%C3%A4tzliche_Indizes_f%C3%BCr_Setup-/Update-Tool_GORM" title="Zusätzliche Indizes für Setup-/Update-Tool GORM">Zusätzliche Indizes für Setup-/Update-Tool GORM</a>
   (German) and the forum thead
   <a class="forum" href="http://forum.adventure-php-framework.org/de/viewtopic.php?f=10&t=246" title="Zusätzliche Indizes für Setup-/Update-Tool GORM">Zusätzliche Indizes für Setup-/Update-Tool GORM</a>
   (German).
</div>

<h3 id="Chapter-3-Database-setup"><a href="#Chapter-3-Database-setup">3. Database setup</a></h3>
After the configuration files have been created, the database must be prepared for usage. This can
be done manually or automatically. The manual way is described in the
<a href="./?Page=064-Generic-OR-mapper-manual-database-setup" title="Manual database setup">manual database setup</a> chapter.
<br />
<br />
The following script shows, how the automated database setup can be done with aim of the
<strong>GenericORMapperSetup</strong> tool. If you are searching for an example script, have a look
at the <em>/apps/modules/genericormapper/data/tools</em> folder in the <em>adventure-codepack-*</em>
release. The file is named <em>setup.php</em> and must be adapted to your application case:
<gen:highlight type="php">
// include page controller
require('../../apps/core/pagecontroller/pagecontroller.php');

// configure the registry if desired
Registry::register('apf::core','Environment','{ENVIRONMENT}');

// include SetupMapper
import('modules::genericormapper::data::tools','GenericORMapperSetup');

// create setup tool
$setup = new GenericORMapperSetup();

// set Context (important for the configuration files!)
$setup->setContext('{CONTEXT}');

// adapt storage engine (default is MyISAM)
$setup->setStorageEngine('MyISAM|INNODB');

// adapt data type of the indexed columns, that are used for object and relation ids
//$setup->setIndexColumnDataType('INT(5) UNSIGNED');

// create database layout
$setup->setupDatabase('{CONFIG_NAMESPACE}','{CONFIG_NAME_AFFIX}','{CONNECTION_NAME}');

// display statements only
$setup->setupDatabase('{CONFIG_NAMESPACE}','{CONFIG_NAME_AFFIX}');
</gen:highlight>
The place holders within the script have the following meaning:
<ul>
  <li>
    <strong>{ENVIRONMENT}</strong>: This is the environment indicator of the application. It is used
    for addressing configuration files and must be adopted, if your environment is set to a value
    different than the default one. For details have a look at the <int:link pageid="134" /> chapter.
  </li>
  <li>
    <strong>{CONTEXT}</strong>: This is the context of the application. It is used for addressing
    configuration files and must be adopted, if your environment is set to a value different than
    the default one. For details have a look at the <int:link pageid="134" /> chapter.
  </li>
  <li>
    <strong>{CONFIG_NAMESPACE}</strong>: The namespace, that contains the mapper configuration files
    (see chapter 2.2).
  </li>
  <li>
    <strong>{CONFIG_NAME_AFFIX}</strong>: The name affix for the configuration files (see chapter 2.1).
  </li>
  <li>
    <strong>{CONNECTION_NAME}</strong>: The name of the database connection, that is used for the
    setup and for productional use.
  </li>
</ul>
<p>
   Further, it is important that the database, that should be initialized, must exist before setup is
   started. Additionally, the user connecting to the database must have <em>CREATE TABLE</em> rights.
   Otherwise, the setup could not be done. If no error is displayed during setup, the setup has finished
   successfully. The result can be checked by using phpMyAdmin or a MySQLAdmin tool.
</p>
<p>Executing the script to display the create statements only, the output should look like this:</p>
<gen:highlight type="sql">
CREATE TABLE IF NOT EXISTS `ent_application` (
  `ApplicationID` INT(5) UNSIGNED NOT NULL auto_increment,
  `DisplayName` VARCHAR(100) character set utf8 NOT NULL default '',
  `CreationTimestamp` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `ModificationTimestamp` timestamp NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY (`ApplicationID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `ent_user` (
  `UserID` INT(5) UNSIGNED NOT NULL auto_increment,
  `DisplayName` VARCHAR(100) character set utf8 NOT NULL default '',
  `FirstName` VARCHAR(100) character set utf8 NOT NULL default '',
  `LastName` VARCHAR(100) character set utf8 NOT NULL default '',
  `EMail` VARCHAR(100) character set utf8 NOT NULL default '',
  `Username` VARCHAR(100) character set utf8 NOT NULL default '',
  `Password` VARCHAR(100) character set utf8 NOT NULL default '',
  `CreationTimestamp` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `ModificationTimestamp` timestamp NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY (`UserID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

...

CREATE TABLE IF NOT EXISTS `cmp_application2user` (
  `CMPID` INT(5) UNSIGNED NOT NULL auto_increment,
  `ApplicationID` INT(5) UNSIGNED NOT NULL default '0',
  `UserID` INT(5) UNSIGNED NOT NULL default '0',
  PRIMARY KEY  (`CMPID`),
  KEY `JOININDEX` (`ApplicationID`,`UserID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `cmp_application2role` (
  `CMPID` INT(5) UNSIGNED NOT NULL auto_increment,
  `ApplicationID` INT(5) UNSIGNED NOT NULL default '0',
  `RoleID` INT(5) UNSIGNED NOT NULL default '0',
  PRIMARY KEY  (`CMPID`),
  KEY `JOININDEX` (`ApplicationID`,`RoleID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
</gen:highlight>

<div class="hint">
   Invoking <em>setIndexColumnDataType()</em> the data type of the columns that store the object and
   relation ids can be adapted. Concerning the sample statements above, the type was changed to
   <em>INT(5) UNSIGNED</em>. In case you need smaller or greater data rooms, you can adjust it
   using
<gen:highlight type="php">
   $setup->setIndexColumnDataType('TINYINT(3)');
</gen:highlight>
   Please be aware, that the value set with this method is directly used within the create 
   statements. In case you are using invalid data types, this will lead to errors during setup of
   the tables.
</div>

<p>Using phpMyAdmin you will get the following screen:</p>

<img src="http://media.adventure-php-framework.org/content/ormapper_phpmyadmin.png" alt="PHPMYAdmin view"/>

<p>
   Now, the configuration of the mapper has finished and you can use it. Changes to the data model
   (at the moment) cannot be automatically applied to the database. For this reason, the affected tables
   must be altered manually. Due to the fact, that the database layout follows some easy ruls, you can
   easily do this yourself. Hints can be taken from the
   <a href="./?Page=064-Generic-OR-mapper-manual-database-setup" title="Manual database setup">manual database setup</a>
   chapter.
</p>
<div class="hint">
   Supporting the task of updating a database setup with the generic OR mapper setup tool a update
   tool was introduced in release 1.11. For detailed description, please refer to
   <int:link pageid="128" />.
</div>
<h3 id="Chapter-4-Usage"><a href="#Chapter-4-Usage">4. Usage of the OR mapper</a></h3>
The OR mapper, more precisely the <strong>GenericORRelationMapper</strong>, offers a list of API
methods, that can be used for data and relation usage and manipulation. The following list gives you
an overview of the existing functions and their meaning:
<ul>
  <li>
    <strong>loadObjectListByCriterion()</strong>:
    Loads an object list by a criterion object.
  </li>
  <li>
    <strong>loadObjectByCriterion()</strong>:
    Loads an object by a criterion object.
  </li>
  <li>
     <strong>loadRelatedObjects()</strong>:
     Loads a list of objects, that are related to a dedicated object, by a relation key.
  </li>
  <li>
     <strong>loadNotRelatedObjects()</strong>:
     Loads a list of objects by a relation key, that are *not* related to a dedicated object.
  </li>
  <li>
     <strong>loadRelationMultiplicity()</strong>:
     Returns the number of objects, that are related to a dedicated object.
  </li>
  <li>
     <strong>saveObject()</strong>:
     Saves an object or object tree, that consists of objects related to each other using the
     defined relations.
  </li>
  <li>
     <strong>deleteObject()</strong>:
     Deletes an object. Associations and compositions are deleted as well.
  </li>
  <li>
    <strong>createAssociation()</strong>:
    Creates an association between two objects.
  </li>
  <li>
    <strong>deleteAssociation()</strong>:
    Deletes the associations between two objects.
  </li>
  <li>
    <strong>deleteAssociations()</strong>:
    Deletes all associations that the given object has.
  </li>
  <li>
    <strong>isAssociated()</strong>:
    Checks, if two objects are associated.
  </li>
  <li>
    <strong>loadObjectListByStatement()</strong>:
    Loads a list of objects by a statement.
  </li>
  <li>
    <strong>loadObjectListByTextStatement()</strong>:
    Loads a list of objects by a statement present as a string.
  </li>
  <li>
    <strong>loadObjectListByIDs()</strong>:
    Loads a list of objects by a list of ids.
  </li>
  <li>
    <strong>loadObjectByStatement()</strong>:
    Loads an object by a statement.
  </li>
  <li>
    <strong>loadObjectByTextStatement()</strong>:
    Loads an object by a statement present as a string.
  </li>
  <li>
    <strong>loadObjectByID()</strong>:
    Loads an object by a given id.
  </li>
  <li>
     <strong>loadObjectsWithRelation()</strong>:
      Loads a list of objects specified by the applied object type (object name as noted within the
      configuration) and the relation it should have.
  </li>
  <li>
     <strong>loadObjectsWithoutRelation()</strong>:
      Loads a list of objects specified by the applied object type (object name as noted within the
      configuration) and the relation it should *not* have.
  </li>
  <li>
     <strong>loadRelatedObject()</strong>:
      Loads a an object that is related to the current object using the applied relation name.
  </li>
</ul>
<p>
   The <strong>*Statement*</strong> methods are provided due to performance optimization reasons. For
   details, please have a look at the
   <a href="./?Page=065-Generic-OR-mapper-performance-hacks" title="Generic OR mapper - Performance hacks">performance hacks</a>
   chapter. Details on the aruments can be taken from the
   <a href="./?Page=002-API-documentation" title="API documentation">API documentation page</a> for the
   modules.
</p>

<h4 id="Chapter-4-1-Create-an-instance"><a href="#Chapter-4-1-Create-an-instance">4.1. Creating an instance of the mapper</a></h4>
<h5 id="Chapter-4-1-1-Classic-approach"><a href="#Chapter-4-1-1-Classic-approach">4.1.1. Classic approach</a></h5>
<p>
   The instance of the OR mapper must be created using the <strong>GenericORMapperFactory</strong>. This
   is necessary, because the concrete mapper must be initialized prior to use and to have the possibility
   to use more than one instance per module. The latter one is probably not necessary within easy
   applications, but in complexe environments this may be a knock-out criterion.
<p>
<p>The next code box shows a typical call of the mapper:</p>
<gen:highlight type="php">
// create the factory using the desired service mode
$ormFact = &$this->getServiceObject(
                  'modules::genericormapper::data',
                  'GenericORMapperFactory'[,
                  {SERVICE_OBJECT_TYPE}]
                  );

// create the mapper using the factory
$orm = &$ormFact->getGenericORMapper(
                  {CONFIG_NAMESPACE},
                  {CONFIG_NAME_AFFIX},
                  {CONNECTION_NAME}[,
                  $logStatements = false]
                  );
</gen:highlight>
<p>The place holders have the following meaning:</p>
<ul>
  <li>
    <strong>{SERVICE_OBJECT_TYPE}</strong>: The type of service object of the factory. This param
    implicitly defines service type of the mapper. Allowed values <em>NORMAL</em>, <em>SINGLETON</em>,
    and <em>SESSIONSINGLETON</em>. Default is <em>SINGLETON</em>. Details can be taken from the
    <int:link pageid="033" anchor="Chapter-3-Service-objects">service object section</int:link>.
  </li>
  <li>
    <strong>{CONFIG_NAMESPACE}</strong>: The namespace, the configuration files reside (see chapter
    2.2).
  </li>
  <li>
    <strong>{CONFIG_NAME_AFFIX}</strong>: The name affix, the configuration files have (see chapter
    2.1).
  </li>
  <li>
    <strong>{CONNECTION_NAME}</strong>: The name of the database connection used for setup and usage.
  </li>
</ul>
<div class="warn">
   <p>
      As of release 1.12 the factory service type also defines the service type of the mapper
      (=scope of the object concerning the service manager's instanciation model). In case, the GORM
      should be created only once per session due to performance reasons (mapping and relation tables
      are then only created once per visit) the factory creation statement must have the third param
      (<em>service type</em>) filled with the value <em>SESSIONSINGLETON</em>.
   </p>
   <p>
      For development environments it is recommended to use the <em>SINGLETON</em> service type.
      Using the <em>SESSIONSINGLETON</em> type, the mapping and relation tables are only updated
      after the session has expired what may lead to unexpected results.
   </p>
   <p>
      Further notes can be taken from the wiki page
      <a linkrewrite="false" class="forum" href="http://wiki.adventure-php-framework.org/de/FAQ_Typische_Fehler_beim_GenericORMapper">Typische Fehler beim GenericORMapper</a>
      (German).
   </p>
</div>
<p>
   Please note, that the factory must be created by the <strong>getServiceObject()</strong> function
   to avoid unnecessary configuration side-effects.
</p>
<div class="hint">
   In case, you want to acivate statement logging for debugging reasons, the <em>$logStatements</em>
   must be set to <em>true</em>. Please do not use this option in productional environments! Details
   can be taken from the
   <a href="./?Page=002-API-Documentation" title="API documentation">API documentation</a>.
</div>
<h5 id="Chapter-4-1-2-Creation-via-DI"><a href="#Chapter-4-1-2-Creation-via-DI">4.1.2. Creation via DI</a></h5>
<p>
   As of release 1.12 the GORM can also be created using the
   <int:link pageid="107" anchor="Chapter-3-2-3-DIServiceManager-Komplexe-Services">DIServiceManager</int:link>.
   This approach implies advantages to testability and decoupling of business layer and presentation
   layer.
</p>
<p>
   Creating an instance of the GORM is thus directly done by the <em>DIServiceManager</em> and not
   using the factory described above. This is because the <em>DIServiceManager</em> only accepts
   explicit service objects for dynamic initialization of other services. For this reason, three
   new services are available that do not contain any logic but the necessary configuration information:
</p>
<ul>
   <li><em>GenericORMapperDIConfiguration</em>: injection of the basic configuration</li>
   <li><em>GenericORMapperDIMappingConfiguration</em>: injection of additional mapping configurations</li>
   <li><em>GenericORMapperDIRelationConfiguration</em>: injection of additional relation configurations</li>
</ul>
<p>
   Details in the configuration beside an application sample can be found on the wiki page
   <a class="wiki" href="http://wiki.adventure-php-framework.org/de/Erzeugen_des_GORM_mit_dem_DIServiceManager" title="Erzeugen des GORM mit dem DIServiceManager">Erzeugen des GORM mit dem DIServiceManager</a>
   (German).
</p>

<h4 id="Chapter-4-2-Loading-data"><a href="#Chapter-4-2-Loading-data">4.2. Loading data</a></h4>
<p>
   To have a concrete example for the next code samples, the following UML diagram should be used. The
   picture contains the business object definition of the
   <a href="./?Page=095-Module-usermanagement" title="Usermanagement module">usermanagement module</a>
   contained in the APF. The code presented here is thus taken from the module's code files.
</p>
<div class="warn">
   <p>
      Please note, that the o/r mapper can only manage objects that are known by the current
      instance. As described in
      <a href="#Chapter-6-Enhancement-of-mapping-and-relation-table">chapter 6</a> the mapping and
      relation configuration can be enhanced by adding further configuration files.
   </p>
   <p>
      Additional hints can be taken from
      <a linkrewrite="false" class="forum" href="http://forum.adventure-php-framework.org/de/viewtopic.php?f=6&t=640">The object name "Application" does not exist ...</a>
      (German).
   </p>
</div>
<p>
   <img src="http://media.adventure-php-framework.org/content/usermanagement_domain_model.png" alt="APF user management domain model"/>
</p>

<h5 id="Chapter-4-2-1-Loading-objects"><a href="#Chapter-4-2-1-Loading-objects">4.2.1. Loading objects</a></h5>
<p>To load objects, you can use the functions</p>
<ul>
  <li><strong>loadObjectByCriterion()</strong></li>
  <li><strong>loadObjectByTextStatement()</strong></li>
  <li><strong>loadObjectByStatement()</strong></li>
  <li><strong>loadObjectByID()</strong></li>
</ul>
<p>
   If you intend to display the details of a user (see UML), you kan take the methods listed above
   to achieve this:
</p>
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// load user (1)
$Crit = new GenericCriterionObject();
$Crit->addPropertyIndicator('UserID',1);
$User = $ORM->loadObjectByCriterion('User',$Crit);

// load user (2)
$select = 'SELECT * FROM ent_user WHERE UserID = \'1\';';
$User = $ORM->loadObjectByTextStatement('User',$select);

// load user (3)
$User = $ORM->loadObjectByStatement('User','modules::usermanagement','load_user_by_id');

// load user (4)
$User = $ORM->loadObjectByID('User',1);
</gen:highlight>
<p>The content of the statement file <strong>load_user_by_id</strong> is:</p>
<gen:highlight type="sql">SELECT * FROM ent_user WHERE UserID = '1';</gen:highlight>
<p>
   Details on the statement execution can be taken from the 
   <int:link pageid="031" anchor="Chapter-5-Statement-files">statement files </int:link>
   documentation.
</p>
<div class="hint">
   As of release 1.12 <strong>GenericDomainObject</strong> was added seom convenience methods to
   ease implementation. By typing
<gen:highlight type="php">
$user = $orm->loadObjectByID('User',1);
echo $user->getObjectId();
</gen:highlight>
   you can easily retrieve the object's id without thinking about the id's property name. Using
   <em>setObjectId()</em> the object id can be set to the applied value. In cse you are interested
   in the object's name, just do the following:
<gen:highlight type="php">
$user = $orm->loadObjectByID('User',1);
echo $user->getObjectName();
</gen:highlight>
   Further, the <strong>GenericDomainObject</strong> now supports PHP's automatic string conversion.
   Thus a user object can be printed like this for debug reasons:
<gen:highlight type="php">
$user = $orm->loadObjectByID('User',1);
echo $user;
</gen:highlight>
</div>

<h5 id="Chapter-4-2-2-Loading-lists"><a href="#Chapter-4-2-2-Loading-lists">4.2.2. Loading lists</a></h5>
For loading lists, the OR mapper features the following methods:
<ul>
  <li><strong>loadObjectListByCriterion()</strong></li>
  <li><strong>loadObjectListByTextStatement()</strong></li>
  <li><strong>loadObjectListByStatement()</strong></li>
  <li><strong>loadObjectListByIDs()</strong></li>
</ul>
If you like to display a list of users (see UML) you can use these methods as presented below:
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// load user list (1)
$Crit = new GenericCriterionObject();
$Crit->addPropertyIndicator('DisplayName','a%');
$UserList = $ORM->loadObjectListByCriterion('User',$Crit);

// load user list (2)
$select = 'SELECT * FROM ent_user WHERE DisplayName LIKE \'a%\';';
$UserList = $ORM->loadObjectListByTextStatement('User',$select);

// load user list (3)
$UserList = $ORM->loadObjectListByStatement('User','modules::usermanagement','load_user_list');

// load user list (4)
$UserList = $ORM->loadObjectListByIDs('User',array(1,2,3,4,5,6));
</gen:highlight>
The content of the statement file <strong>load_user_list</strong> looks like this:
<gen:highlight type="sql">SELECT * FROM ent_user WHERE DisplayName LIKE 'a%';</gen:highlight>
<br />
<h5 id="Chapter-4-2-3-Loading-related-objects"><a href="#Chapter-4-2-3-Loading-related-objects">4.2.3. Loading related objects</a></h5>
If you have to display the corresponding groups while listing the user details, you can use the
<ul>
  <li><strong>loadRelatedObjects()</strong></li>
</ul>
function. This method returns the objects related to a dedicated object by the desired relation key.
The next example shows, how to load the groups associated to a user:
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// load user list
$Crit = new GenericCriterionObject();
$Crit->addOrderIndicator('DisplayName','ASC');
$UserList = $ORM->loadObjectListByCriterion('User',$Crit);

// display the list including the associated groups
for($i = 0; $ < count($UserList); $i++){

   // display name of the user
   echo $UserList[$i]->getProperty('DisplayName');

   // load corresponding groups
   $GroupList = $ORM->loadRelatedObjects($UserList[$i],'Group2User');

   // display groups
   echo ' ,Gruppen: ';
   for($j = 0; $j < count($GroupList); $j++){
      echo $GroupList[$j]->getProperty('DisplayName').' ';
    // end for
   }

 // end for
}
</gen:highlight>
To ease the handling of loading related objects, the <strong>GenericDomainObject</strong> posesses
the <strong>loadRelatedObjects()</strong> function. This enables you to load the related objects using
a relation key, where no instance of the mapper is available. To apply this to the example above,
the user's groups could be loaded using
<gen:highlight type="php">
$GroupList = $UserList[$i]->loadRelatedObjects('Group2User');
</gen:highlight>
<strong>Note:</strong> The amount of objects loaded, can be limited using the
<strong>GenericCriterionObject</strong>. So if you like to load the first 10 groups only, include the
following code in your application:
<gen:highlight type="php">
// define the limit
$Crit = new GenericCriterionObject();
$Crit->addOrderIndicator('DisplayName','ASC');
$Crit->addPropertyIndicator('DisplayName','A%');
$Crit->addCountIndicator(10);

// load the group list using the domain object
$GroupList = $UserList[$i]->loadRelatedObjects('Group2User',$Crit);

// load the group list using the mapper
$GroupList = $ORM->loadRelatedObjects($UserList[$i],'Group2User',$Crit);
</gen:highlight>
<br />
<h5 id="Chapter-4-2-4-Loading-not-related-objects"><a href="#Chapter-4-2-4-Loading-not-related-objects">4.2.4. Loading not related objects</a></h5>
Often you have to select objects, that are not (yet) related with a given object, but a relation is
defined. A good example, concerning the UML diagram above, is the listing of groups, that a certain
user has not been added yet. For this purpose, the
<ul>
  <li><strong>loadNotRelatedObjects()</strong></li>
</ul>
function could be used. The next example shows, how groups not associated with desired user can be
selected:
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// select user
$Crit = new GenericCriterionObject();
$Crit->addpropertyIndicator('DisplayName','Mustermann, Max');
$User = $ORM->loadObjectByCriterion('User',$Crit);

// select groups, that are not related with the user
$GroupList = $ORM->loadNotRelatedObjects($User,'Group2User');

// present list
for($i = 0; $ < count($GroupList); $i++){
   echo '<br />'.$GroupList[$i]->getProperty('DisplayName');
 // end for
}
</gen:highlight>
<strong>Note:</strong> The amount of objects loaded, can be limited using the
<strong>GenericCriterionObject</strong>. A typical application case is to limit the list by relations
to other objects. The following example explains, how to load all groups, that are not associated to
the desired user but are composed under a <em>Application</em> object:
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// select user
$Crit = new GenericCriterionObject();
$Crit->addpropertyIndicator('DisplayName','Mustermann, Max');
$User = $ORM->loadObjectByCriterion('User',$Crit);

// define additive relation criterion
$Crit = new GenericCriterionObject();
$App = new GenericDomainObject('Application');
$App->setProperty('ApplicationID',1);
$Crit->addRelationIndicator('Application2Group',$App);

// select groups, that are not related with the user
$GroupList = $ORM->loadNotRelatedObjects($User,'Group2User',$Crit);

// present list
for($i = 0; $ < count($GroupList); $i++){
   echo '<br />'.$GroupList[$i]->getProperty('DisplayName');
 // end for
}
</gen:highlight>
<br />
<h4 id="Chapter-4-2-5-Loading-the-relation-multiplicity"><a href="#Chapter-4-2-5-Loading-the-relation-multiplicity">4.2.5. Loading the relation multiplicity</a></h4>
To be able to find out, how much objects are related to a certain one, the
<ul>
  <li><strong>loadRelationMultiplicity()</strong></li>
</ul>
method can be used. It returns the multiplicity by a given object and a relation key. In order to
count the users within a group, add the follwing code to your business layer:
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// select group
$Group = $ORM->loadObjectByID('Group',1);

// select amount of users within the group
echo $ORM->loadRelationMultiplicity($Group,'Group2User');
</gen:highlight>

<h4 id="Chapter-4-2-6-Loading-the-object-count"><a href="#Chapter-4-2-6-Loading-the-object-count">4.2.6 Loading the object count</a></h4>
<p>
   Beneath the amount of objects related to another object, release 1.12 introduces a method to
   request the amount of objects of a certain kind stored in the database. For this reason, the
</p>
<ul>
   <li><strong>loadObjectCount()</strong></li>
</ul>
<p>
   method has been added. It takes the name of the object as defined in the mappin configuration as
   it's first parameter. As an optional second parameter, you can pass a <em>GenericCriterionObject</em>
   that limits the amount of objects using attribute indicators.
</p>
<p>
   Requesting the amount of objects of type <em>User</em> and all users who's last name starts with
   character <em>A</em> can be requested as follows:
</p>
<gen:highlight type="php">
$ormf = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');
$orm = &$ormf->getGenericORMapper('modules::usermanagement','umgt_1','umgt');

$totalUsers = $orm->loadObjectCount('User');

$crit = new GenericCriterionObject();
$crit->addPropertyIndicator('LastName','A%');
$usersWithA = $orm->loadObjectCount('User',$crit);
</gen:highlight>
<div class="warn">
   Due to the fact, that this query is not cached, it should not be integrated in performance
   relevant parts of the application.
</div>

<h4 id="Chapter-4-3-Saving-objects"><a href="#Chapter-4-3-Saving-objects">4.3. Saving objects</a></h4>
Saving objects is quite easy. Regardless you save objects or object trees, the
<ul>
  <li><strong>saveObject()</strong></li>
</ul>
function can be used. The next code box shows how to save a user:
<gen:highlight type="php">
// create fabric
$ormf = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$orm = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// set some attributes
$user = new GenericDomainObject('User');
$user->setProperty('FirstName','Christian');
$user->setProperty('LastName','Achatz');

// save user
$orm->saveObject($user);
</gen:highlight>
<div class="hint">
   As of release 1.11, the saved object (in this case <em>$user</em>) can directly be reused after
   calling <em>saveObject()</em>. The mapper therefor injects the current mapper instance and the
   id of the object within the database. Details on the feature request can be taken from the forum
   post
   <a class="forum" href="http://forum.adventure-php-framework.org/de/viewtopic.php?f=10&t=154" title="Erweiterung GORM (Release 1.11)" linkrewrite="false">Erweiterung GORM (Release 1.11)</a>
   (German).
</div>

<h4 id="Chapter-4-4-Saving-object-trees"><a href="#Chapter-4-4-Saving-object-trees">4.4. Saving object trees</a></h4>
As already mentioned above, the OR mapper is not only able to save flat object structures but also
object trees. This feature can especially be used within your application's data layer to create the
necessary relations.
<br />
<br />
<strong>Problem:</strong> When you create a User, it should be composed under the Application object.
The latter one is used to ensure multi-client capability for the user management module.
<br />
<br />
<strong>Solution:</strong> To create the relation between these two objects (<em>Application</em>
and <em>User</em>), the <strong>addRelatedObject()</strong> method of the <strong>GenericDomainObject</strong>
can be used. The following code box shows, how the implementation is like:
<gen:highlight type="php">
// create fabric
$ormf = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$orm = &$ormf->getGenericORMapper('modules::usermanagement','umgt','umgt');

// load application object
$app = $orm->loadObjectByID('Application',1);

// fill user
$user = new GenericDomainObject('User');
$user->setProperty('FirstName','Christian');
$user->setProperty('LastName','Achatz');

// compose user
$app->addRelatedObject('Application2User',$user);

// save object tree
$orm->saveObject($app);
</gen:highlight>
<div class="hint">
   <p>
      Creating relations of type <em>composition</em> must be done exactly as described within the
      code block. This is because a composed object cannot <em>live</em> without it's father object.
      Associations can be added afterwards using <em>createAssociation()</em>.
   </p>
   <p>
      In case objects have to be created - as the user in the code snippet above - it is not
      necessary to save the user before creating it's composition with the application object. The
      GORM does this implicitly during saving the object tree (consisting of the <em>Application</em>,
      the <em>User</em>, and the relation between the two objects composing the user under the app).
   </p>
</div>
If you intend to add a group and a role at the same time, the php code above must be added the
following lines:
<gen:highlight type="php">
// load application
$app = $orm->loadObjectByID('Application',1);

// fill user
$user = new GenericDomainObject('User');
$user->setProperty('FirstName','Christian');
$user->setProperty('LastName','Achatz');

// load group
$group = $orm->loadObjectByID('Group',1);

// load role
$role = $orm->loadObjectByID('Role',1);

// associate role and group
$user->addRelatedObject('Group2User',$group);
$user->addRelatedObject('Role2User',$role);

// compose user
$app->addRelatedObject('Application2User',$user);

// save object tree
$orm->saveObject($app);
</gen:highlight>
<div class="warn">
   <p>
      The generic O/R mapper is able to save object trees with various size. Please note, that it
      may be necessary to treat huge object trees a little bit different. But this is only necessary
      for applications with high performance requirements. In all other cases, the performance of the
      GORM is absolutely sufficient.
   </p>
   <p>
      In case the amount of objects invoked during object tree persistance is greater than 20 including
      at least one relation per object, it is recommended to save the objects first by using
      <em>saveObject()</em>. Afterwards, the relations necessary can be created using
      <em>createAssociation()</em>. This kind of hanling is only possible for associations and cannot 
      be applied for compositions. This is because of the quality of composition relations.
   </p>
</div>

<h3 id="Chapter-5-GenericCriterionObject"><a href="#Chapter-5-GenericCriterionObject">5. The GenericCriterionObject</a></h3>
<p>
   The present chapter is intended to describe the usage of the <strong>GenericCriterionObject</strong>.
   As already mentioned in the chapters above, the class can be used to configure your request rather
   than to write SQL statements. The object can be used with all <strong>load*ByCriterion()</strong>
   methods and while loading relation objects on existing domain objects or domain object lists.
</p>
<p>
   The code box below presents an application use case of the <strong>GenericCriterionObject</strong>,
   where a list of users should be loaded. The users should be assigned to a special group and must be
   composed under a certain application object:
</p>
<gen:highlight type="php">
class UsermanagementManager extends APFObject {

   public function getUserList(){

      // create fabric
      $ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

      // create mapper
      $ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

      // create the criterion object
      $Crit = new GenericCriterionObject();

      // add the relation definition for the composition to the "Application" object
      $Application = new GenericDomainObject('Application');
      $Application->setProperty('ApplicationID',1);
      $Crit->addRelationIndicator('Application2User',$Application);

      // add the relation definition for the association to the "Group" object
      $Group = new GenericDomainObject('Group');
      $Group->setProperty('GroupID',1);
      $Crit->addRelationIndicator('Group2User',$Group);

      // add a limit indicator
      $Crit->addCountIndicator(0,3);

      // add a property indicator applied to the objects to be loaded
      $Crit->addPropertyIndicator('LastName','Achatz');

      // add an order indicator
      $Crit->addOrderIndicator('FirstName','ASC');
      $Crit->addOrderIndicator('LastName','DESC');

      // add a directive, which properties should be loaded
      $Crit->addLoadedProperty('FirstName');
      $Crit->addLoadedProperty('LastName');

      // load an object list with aid of the criterion object or ...
      return $ORM->loadObjectListByCriterion('User',$Crit);

      // ... load an object with aid of the criterion object
      return $ORM->loadObjectByCriterion('User',$Crit);

   }

}
</gen:highlight>
<strong>Notes on the source code:</strong>
<ul>
  <li>
    <strong>Relations</strong>:
    <br />
    Adding a relation indicator to the criterion object says, that the object or object list to be
    loaded must have a relation to the object within the criterion. If a relation to the
    <em>Application</em> object (composition) and to the <em>Group</em> object (association) is added,
    this means that the resulting object list belongs to a dedicated application and is assigned to
    a special group.
    <br />
    If a developer is likely to select all users, that belong to a dedicated application and are
    are member of a group and are assigned a role, three relation indicators must be added to the
    criterion object.
  </li>
  <li>
     <strong>Sort sequence</strong>:
     <br />
     The order of calls decides the sort sequences. If you like to sort in another direction, the
     sort indicators must be changed. <strong>ASC</strong> stands for ascending and <strong>DESC</strong>
     for descending sortation.
  </li>
</ul>
<div class="hint">
   Since version 1.13 of the APF the <em>GenericCriterionObject</em> class offers a
   <em>fluent interface</em>. This can be used to cascade calls:
<gen:highlight type="php">
$criterion = new GenericCriterionObject();
$criterion
    ->addCountIndicator(1)
    ->addRelationIndicator('xxx', $sourceObject)
    ->addOrderIndicator('name')
    ->addPropertyIndicator($attributeName, $attributeValue);
</gen:highlight>
   Further notes can be found on the 
   <a class="wiki" href="http://wiki.adventure-php-framework.org/de/Fluent_Interface_des_GenericCriterionObject">Fluent Interface des GenericCriterionObject</a>
   (German) wiki page.
</div>

<h3 id="Chapter-6-Enhancement-of-mapping-and-relation-table"><a href="#Chapter-6-Enhancement-of-mapping-and-relation-table">6. Enhancement of mapping and relation table</a></h3>
<p>
   If the <em>GenericORRelationMapper</em> should be used for several applications or multiple application
   cases, sometimes it is good to split the configuration into several pieces. This makes configuration
   more generic and the mapper can thus be enabled to use specific parts of a greater database. To do
   so, you have two different choices: you create one configuration set for each application case or
   you create only a basic configuration, that is interessting for all application cases (e.g. <em>user
   management</em>) and use the
</p>
<ul>
  <li><strong>addMappingConfiguration()</strong></li>
  <li><strong>addRelationConfiguration()</strong></li>
</ul>
to extend the configuration for the special use cas. With these functions, any object and relation
configuration files can be added. The following example shows to you, how the functions can be used
to upgrade the scope of the mapper:
<gen:highlight type="php">
// create fabric
$ORMF = &$this->getServiceObject('modules::genericormapper::data','GenericORMapperFactory');

// create mapper
$ORM = &$ORMF->getGenericORMapper('modules::usermanagement','umgt','umgt');

// add another object definition
$oRM->addMappingConfiguration('modules::usermanagement','umgt_2');

// add another relation definition
$oRM->addRelationConfiguration('modules::usermanagement','umgt_2');
</gen:highlight>
The syntax of the object and relation configuration is the same as the default configuration described
in the chapter <a href="#2-3-Object-and-relation-definition" title="2.3. Object and relation definition">2.3. Object and relation definition</a>.
The additional object configuration file contains the following objects:
<gen:highlight type="ini">
[Project]
DisplayName = "VARCHAR(100)"
Description = "TEXT"

[News]
DisplayName = "VARCHAR(100)"
Title = "VARCHAR(100)"
Content = "TEXT"
</gen:highlight>
and the newly added relations are
<gen:highlight type="ini">
[Application2Project]
Type = "COMPOSITION"
SourceObject = "Application"
TargetObject = "Project"

[Project2News]
Type = "COMPOSITION"
SourceObject = "Project"
TargetObject = "News"
</gen:highlight>

<h3 id="Chapter-7-Notes"><a href="#Chapter-7-Notes">7. Notes</a></h3>
<p>
   Hints on performance relevant issues can be found in the
   <a href="./?Page=065-Generic-OR-mapper-performance-hacks" title="Performance hacks">performance hacks</a>
   chapter, the manual database setup is discussed in the
   <a href="./?Page=064-Generic-OR-mapper-manual-database-setup" title="Manual database setup">manual database setup</a>
   section. The source files of the
   <a href="./?Page=095-Module-usermanagement" title="Usermanagement module">usermanagement module</a>
   can be used as an extended example.
</p>
<core:importdesign namespace="modules::comments::pres::templates" template="comment" categorykey="en_063" />